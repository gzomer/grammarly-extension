/*! For license information please see Grammarly-check.js.LICENSE.txt */
var e={57238:(e,t,n)=>{var r=n(65747),i="chrome-extension://__MSG_@@extension_id__/",o="moz-extension://__MSG_@@extension_id__/",s="safari-web-extension://__MSG_@@extension_id__/",a=self.GR_RESOURCE_ROOT||i,c=self.GR_RESOURCE_ROOT||o,u=self.GR_RESOURCE_ROOT||s;e.exports={__css:r.toString().replace(new RegExp(i,"g"),a).replace(new RegExp(o,"g"),c).replace(new RegExp(s,"g"),u),...r.locals}},65747:(e,t,n)=>{var r=n(93476)((function(e){return e[1]}));r.push([e.id,"._3Spqv-animatedUnderline{visibility:hidden;position:fixed;}._3Spqv-animatedUnderline:after{content:'';position:absolute;visibility:visible;height:3px;bottom:0;border-radius:10px;background:#488cc8;animation:_15P6d-showUnderline 1.3s ease forwards}._3Spqv-animatedUnderline._1jDIx-completeAnimation:after{animation:_15P6d-showUnderline .2s ease forwards}@keyframes _15P6d-showUnderline{0%{width:0%}100%{width:100%}}._28F_K-checkAnimatedUnderline{animation:_15P6d-showUnderline 2s ease forwards;}._28F_K-checkAnimatedUnderline._1jDIx-completeAnimation{animation:_15P6d-showUnderline .2s ease forwards}",""]),r.locals={animatedUnderline:"_3Spqv-animatedUnderline",showUnderline:"_15P6d-showUnderline",completeAnimation:"_1jDIx-completeAnimation",checkAnimatedUnderline:"_28F_K-checkAnimatedUnderline"},e.exports=r},93476:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(r)for(var o=0;o<this.length;o++){var s=this[o][0];null!=s&&(i[s]=!0)}for(var a=0;a<e.length;a++){var c=[].concat(e[a]);r&&i[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),t.push(c))}},t}},52961:e=>{e.exports={animatedUnderline:"_24bLp",showUnderline:"jF640",completeAnimation:"gNDOL"}},27061:e=>{var t,n,r=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var a,c=[],u=!1,l=-1;function d(){u&&a&&(u=!1,a.length?c=a.concat(c):l=-1,c.length&&h())}function h(){if(!u){var e=s(d);u=!0;for(var t=c.length;t;){for(a=c,c=[];++l<t;)a&&a[l].run();l=-1,t=c.length}a=null,u=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function p(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new f(e,t)),1!==c.length||u||s(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=p,r.addListener=p,r.once=p,r.off=p,r.removeListener=p,r.removeAllListeners=p,r.emit=p,r.prependListener=p,r.prependOnceListener=p,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}}},t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={id:r,exports:{}};return e[r](i,i.exports,n),i.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={};function t(){return self.chrome&&self.chrome.runtime&&self.chrome.runtime.lastError}function r(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function i(){return r()+r()+"-"+r()+"-"+r()+"-"+r()+"-"+r()+r()+r()}n.r(e),n.d(e,{emitBackground:()=>_n,emitError:()=>dn,emitFocusedTab:()=>yn,emitTabs:()=>mn,emitTo:()=>bn,getTopFrameId:()=>vn,init:()=>hn,initMessage:()=>sn,off:()=>gn,on:()=>pn,onBackgroundPortReconnect:()=>ln,one:()=>fn,promiseBackground:()=>wn});const o=i();function s(e,t,n,r,i=!1){if(null==e)return;const a=e;if("string"!=typeof t)return Object.keys(t).forEach((e=>{t[e]&&s(a,e,t[e],r)}));{if(!n)return;const e=a[o]||[];return a[o]=e,r?(a[o]=e.filter((e=>!(e.event===t&&e.cb===n))),a.removeEventListener(t,n,i)):(e.push({event:t,cb:n}),a.addEventListener(t,n,i)),{el:a,event:t,cb:n,bubble:i}}}function a(e){const t=[];let n;for(;!(n=e.next()).done;)t.push(n.value);return t}function c(e,t){return Object.prototype.hasOwnProperty.call(t,e)}function u(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}const l=function(){const e=Object.prototype.toString;return"[object Arguments]"===e.call(arguments)?function(t){return"[object Arguments]"===e.call(t)}:function(e){return c("callee",e)}}(),d=function(){const e=!{toString:null}.propertyIsEnumerable("toString"),t=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],n=function(){return arguments.propertyIsEnumerable("length")}(),r=function(e,t){for(var n=0;n<e.length;){if(e[n]===t)return!0;n+=1}return!1};return"function"!=typeof Object.keys||n?function(i){if(Object(i)!==i)return[];let o,s;const a=[],u=n&&l(i);for(o in i)!c(o,i)||u&&"length"===o||(a[a.length]=o);if(e)for(s=t.length-1;s>=0;)o=t[s],c(o,i)&&!r(a,o)&&(a[a.length]=o),s-=1;return a}:function(e){return Object(e)!==e?[]:Object.keys(e)}}();function h(e){return null===e?"Null":void 0===e?"Undefined":Object.prototype.toString.call(e).slice(8,-1)}const f=function(e){return new Promise((t=>setTimeout(t,e)))};const p=function(){let e,t;return{promise:new Promise(((n,r)=>{e=n,t=r})),resolve:e,reject:t}};var g;function m(e){return new Promise(((t,n)=>Promise.resolve(e).then(n,t)))}!function(e){function t(e){return new Promise(e)}e.create=t,e.createCompletionSource=p,e.sync=function(e){return t(((t,n)=>t(e())))},e.delay=f}(g||(g={}));Error;const b=function e(t,n,r=[],i=[]){if(u(t,n))return!0;if(h(t)!==h(n))return!1;if(null==t||null==n)return!1;if("function"==typeof t.equals||"function"==typeof n.equals)return"function"==typeof t.equals&&t.equals(n)&&"function"==typeof n.equals&&n.equals(t);switch(h(t)){case"Arguments":case"Array":case"Object":if("function"==typeof t.constructor&&"Promise"===function(e){const t=String(e).match(/^function (\w*)/);return null==t?"":t[1]}(t.constructor))return t===n;break;case"Boolean":case"Number":case"String":if(typeof t!=typeof n||!u(t.valueOf(),n.valueOf()))return!1;break;case"Date":if(!u(t.valueOf(),n.valueOf()))return!1;break;case"Error":return t.name===n.name&&t.message===n.message;case"RegExp":if(t.source!==n.source||t.global!==n.global||t.ignoreCase!==n.ignoreCase||t.multiline!==n.multiline||t.sticky!==n.sticky||t.unicode!==n.unicode)return!1;break;case"Map":case"Set":if(!e(a(t.entries()),a(n.entries()),r,i))return!1;break;case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}const o=d(t);if(o.length!==d(n).length)return!1;let s=r.length-1;for(;s>=0;){if(r[s]===t)return i[s]===n;s-=1}for(r.push(t),i.push(n),s=o.length-1;s>=0;){const a=o[s];if(!c(a,n)||!e(n[a],t[a],r,i))return!1;s-=1}return r.pop(),i.pop(),!0};function v(e,t){return e.some((e=>e===t))?t:void 0}class y extends Error{constructor(e){super("Matching not exhaustive"+(e?`: unexpected value ${e}`:""))}}function _(e){throw new y(e)}function w(e){const t=parseInt(e,10);return isNaN(t)?void 0:t}function x(e,t){try{return e()}catch(e){return t(e)}}function E(){}function S(e){let t,n=!1;return(...r)=>(n||(n=!0,t=e(...r)),t)}function I(e,t){const n=new Set;let r;return(...i)=>{const o=t(...i);return n.has(o)||(n.add(o),r=e(...i)),r}}function A(e,t){let n,r,i=!0;function o(e,n=[]){return i&&(i=!1,r=g.createCompletionSource(),setTimeout((()=>{try{r.resolve(t(...n))}catch(e){r.reject(e)}finally{i=!0}}),e)),r.promise}return(...t)=>{const r=n;return n=Date.now(),o(void 0===r||n-r>=e?0:e-(n-r),t)}}function T(e,t,n){const r=n();return e>0?r.catch((r=>new Promise(((e,n)=>setTimeout(e,t))).then((r=>T(e-1,t,n))))):r}var O;!function(e){function t(){return(65536*(1+Math.random())|0).toString(16).substring(1)}e.create=function(){return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}}(O||(O={}));void 0!==self.requestIdleCallback&&self.requestIdleCallback;class C extends Error{constructor(e){super(`Assertion failed: ${e?"string"==typeof e?e:e():"(unnamed)"}`)}}function k(e,t){if(!e)throw new C(t)}function R(e,t){if(null==e)throw new C((()=>t?`Expected ${t} to be non-null`:"Expected non-null"));return e}var F,N,P,M,D,j,U;function L(e,t){return e.filter((e=>!!e)).join(t)}!function(e){const t={chromiumWebExtension:"chromeExt",firefoxWebExtension:"firefoxExt",safariAppExtension:"safariExt",safariWebExtension:"safariWebExt",safariIOSWebExtension:"safariIOSExt"};function n(e,n){return"edge"===e?"chromiumEdgeExt":t[n]}e.getAppName=n,e.create=function(e,t,r){return{appName:R(n(e,t),"gnar app name"),url:`https://gnar.${r}`,domain:`.${r}`,sendEmailInfoTracking:!0,sendFluidExperimentData:!1}}}(F||(F={})),function(e){const t={chromiumWebExtension:"extensionChrome",firefoxWebExtension:"extensionFirefox",safariAppExtension:"extensionSafari",safariWebExtension:"extensionSafariWeb",safariIOSWebExtension:"extensionSafariIOS"};e.create=function(e,n,r){return{appName:"edge"===e?"extensionEdge":R(t[n],"felog app name"),sendUsageMetrics:!0,sendPerfMetricsType:"dev"===r?"local":Math.random()<=.01?"send":"off"}}}(N||(N={})),function(e){const t={chromiumWebExtension:"extension_chrome",firefoxWebExtension:"extension_firefox",safariAppExtension:"extension_safari",safariWebExtension:"extension_safari_web",safariIOSWebExtension:"extension_safari_ios"};e.create=(e,n)=>({appName:"edge"===e?"extension_chromium_edge":R(t[n],"capi app name")})}(P||(P={})),function(e){e.create=function(e){return{urls:{fetchMessages:`${e}/api/v1/messages`,acknowledgeMessage:`${e}/api/v1/messages/acknowledge`,dismissMessage:`${e}/api/v1/messages/dismiss`}}}}(M||(M={})),function(e){const t={chromiumWebExtension:"chromeExt",firefoxWebExtension:"firefoxExt",safariAppExtension:"safariExt",safariWebExtension:"safariWebExt",safariIOSWebExtension:"safariIOSExt"};e.create=function(e,n){return{xClientType:"edge"===e?"chromiumEdgeExt":t[n]}}}(D||(D={})),function(e){e.create=function(e,t,n,r,i){const o="safari"===e?"disableAppsPromotion=true":"";function s(e){const n=`https://${e}.${t}`;return(e="",t="")=>{const r=L([o,t],"&");return L([n+e,r],"?")}}const a=s("www"),c=s("app"),u=s("account"),l=s("redirect"),d=`https://data.${t}`,h=`https://auth.${t}/v3`,f=`wss://capi.${t}/freews`,p=`https://goldengate.${t}/snippets/v1/snippets`,g=`https://goldengate.${t}/client-controls`,m=`https://capi.${t}/api/reader`;return{accountSubscription:u("/subscription"),accountSubscriptionAddBillingInfo:u("/admin/subscription","popup=add_billing_info"),adminAccountSubscription:u("/admin/subscription"),accountAdminSubscriptionAddBillingInfoToUngatedTrial:u("/admin/subscription","popup=ungated_trial"),app:c(),appPersonalDictionary:u("/customize"),capi:f,capiGDocs:`wss://capi.${t}/gdocs`,dapiMimic:`${d}/api/mimic`,dapiProps:`${d}/api/props/v2`,dapiFindProps:`${d}/api/props/v2/find`,editorDictionary:c("/profile/dictionary"),dictionary:`https://capi.${t}/api/defs`,docs:c("/docs"),docsApi:`https://dox.${t}/documents`,newDoc:c("/docs/new"),userOrAnonymous:`${h}/user/oranonymous`,userData:`${h}/user/userdata`,authSignin:`${h}/api/login`,authSignup:`${h}/api/signup`,authExchange:`${h}/api/unified-login/code/exchange`,authLogout:`${h}/logout`,signin:a("/signin"),signup:a("/signup"),fbSignin:a("/signin","fromExtensionFb=true"),fbSignup:a("/signup","fromExtensionFb=true"),googleSignin:a("/signin","fromExtensionGoogle=true"),googleSignup:a("/signup","fromExtensionGoogle=true"),resetPassword:a("/resetpassword"),newFelog:n,sumoLogic:r,vmetrics:i,welcomeC:a("/extension-success"),afterInstall:a("/after_install_page/"),upgrade:a("/upgrade"),planComparison:a("/plans"),businessEHomepage:a("/business/e"),businessPricing:a("/business/pricing"),uninstall:a("/extension-uninstall"),terms:a("/terms"),policy:a("/privacy-policy"),californiaPolicy:a("/privacy-policy#for-california-users"),extensionSuccess:a("/extension-success"),firefoxPrivatePolicy:"https://addons.mozilla.org/en-US/firefox/addon/grammarly-1/privacy/",dynamicConfigUrl:"https://d27xxe7juh1us6.cloudfront.net/dynamicConfig.json",pageConfigUrl:"https://d27xxe7juh1us6.cloudfront.net/browserplugin/config.json",grammarlyDomain:t,grammarlyProtocol:"https:",redirect:l("/redirect"),snippetsApi:p,snippetsNew:u("/admin/snippets","action=create"),snippetsAdmin:u("/admin/snippets"),snippetsSettings:u("/customize/snippets"),clientControlsApi:g,readerMailApi:m,suggestionsSettings:u("/customize/suggestions"),allSettings:u(),styleGuideSettings:u("/admin/style-guide"),writingStyleSettings:u("/admin/style-guide-writing-style"),brandTones:u("/admin/brand-tones"),grammarlyIdeasSelf:c("/ideas/grow/self"),grammarlyIdeasPeer:c("/ideas/grow/peer"),grammarlyIdeasSales:c("/ideas/sales"),iOSApp:"grammarly://home"}}}(j||(j={})),function(e){const t="grammarly.com",n="qagr.io";e.create=function(e,r,i){const o=(e,t,n)=>"prod"===i?e:"qa"===i?t:"dev"===i?n:_(i),s="https://127.0.0.1:8000",a=o("https://f-log-extension.grammarly.io",s,s),c=o("https://endpoint2.collection.us2.sumologic.com/receiver/v1/http/ZaVnC4dhaV1OF-4ic11yqpre0casnyvs_ZoaCHciEYdRyBkrfwP6DMlsWt8tSVU76RPqgGvAGjXGQk_UNuxPx-pYbToJapM_Fr0CUcgKaA8_IVl-lhSr5Q==",s,s),u=o("https://femetrics.grammarly.io/batch/import","https://femetrics.qagr.io/batch/import","https://femetrics.qagr.io/batch/import"),l=o(t,n,n),d="https://chipmunk.grammarly.com",h=o(d,d,d);return{url:j.create(e,"grammarly.com",a,c,u),gnar:F.create(e,r,l),felog:N.create(e,r,i),capi:P.create(e,r),chipmunk:M.create(h),auth:D.create(e,r),extensionId:"87677a2c52b84ad3a151a4a72f5bd3c4"}}}(U||(U={}));const B=x((()=>browser),(()=>self.browser)),$=x((()=>browser),(()=>self.browser));self.chrome=self.chrome;var V,W,G,q,H,z,K,J,Y,X;!function(e){e.create=function(e,t,n,r,i,o,s,a){const c=void 0!==o&&void 0!==s?o:"UNVERSIONED",u=`${e}.${t}.${n}`;return{version:u,fullVersion:`${u}-${[r,["prod"!==i?i:null,c!==r?c:null].filter((e=>!!e)).join(".")].filter((e=>""!==e)).join("/")}`,commitHash:s,gitBranch:o,manifestVersion:a}},e.getManifestVersion=function(e,t,n){switch(e){case"safariAppExtension":switch(t){case"bg":case"popup":return n.safari.extension.displayVersion;default:return}case"chromiumWebExtension":return n.chrome.runtime.getManifest().version;case"firefoxWebExtension":return B.runtime.getManifest().version;case"safariWebExtension":case"safariIOSWebExtension":return $.runtime.getManifest().version;default:return _(e)}}}(V||(V={})),function(e){e.create=function(e){return v(["chrome","safari","firefox","edge"],e)},e.isValidTargetBrowser=function(e){return["chrome","safari","firefox","edge"].includes(e)},e.detect=function(e){return e.chrome&&/google/i.test(e.navigator.vendor)?e.navigator.appVersion.indexOf("Edg")>-1?"edge":"chrome":-1!==e.navigator.userAgent.indexOf("Firefox")?"firefox":/^((?!chrome).)*safari/i.test(e.navigator.userAgent)?"safari":void 0}}(W||(W={})),function(e){e.create=function(e){return v(["dev","prod","qa"],e)}}(G||(G={})),function(e){e.create=function(e){return v(["chromiumWebExtension","firefoxWebExtension","safariAppExtension","safariWebExtension","safariIOSWebExtension"],e)}}(q||(q={})),function(e){e.create=function(e,t,n,r){return{browser:e,extensionType:t,env:n,context:r}}}(H||(H={})),function(e){e.create=function(e){return{type:W.detect(e)||"other"}}}(z||(z={})),function(e){e.create=function(e){return{isWindows:-1!==e.navigator.appVersion.indexOf("Win"),isMac:-1!==e.navigator.appVersion.indexOf("Mac"),isChromeOS:-1!==e.navigator.appVersion.indexOf("CrOS")}}}(K||(K={})),function(e){e.create=function(e){return{browser:z.create(e),os:K.create(e)}}}(J||(J={})),function(e){function t(e,t,n,r,i,o,s){return{env:e,major_number:t,build_number:n,release_number:r,git_branch:i,git_commit:o,manifest_version:s}}e.create=t,e.fromBrowserify=function(){return t("prod","14","1050","0","UNVERSIONED","UNVERSIONED","2")}}(Y||(Y={})),function(e){e.getTargetEnv=function(e){if(!e.env)throw new Error("processEnv.env is null or undefined");const t=G.create(e.env);if(!t)throw new Error(`Invalid processEnv.env: ${e.env}`);return t},e.create=function(e,t,n,r,i){const o=[r.major_number,r.build_number,r.release_number].map(w);let s;if(3===o.length&&o.every((e=>void 0!==e)))s=o;else{let e;try{e=V.getManifestVersion(t,n,self)}catch(e){}const r=(e||"").split(".").map(w);s=3===r.length&&r.every((e=>void 0!==e))?r:[0,0,0]}const[a,c,u]=s;return{buildInfo:V.create(a,c,u,e,i,r.git_branch,r.git_commit,r.manifest_version),bundleInfo:H.create(e,t,i,n),appConfig:U.create(e,t,i),systemInfo:J.create(self)}}}(X||(X={}));const Q=new class{constructor(e){this._getFallbackValue=e}init(e){if(void 0!==this._value)throw new Error("Global value already initialized.");this._value=e}get(){if(void 0===this._value){if(void 0===this._getFallbackValue)throw new Error("Global value not initialized and no fallback value provided.");this._value=this._getFallbackValue()}return this._value}}((()=>{throw new Error("Global config not initialized")}));let Z=()=>Q.get();function ee(){return Z()}function te(){return"firefox"===ee().bundleInfo.browser}function ne(){return"edge"===ee().bundleInfo.browser}function re(){return"bg"===ee().bundleInfo.context}function ie(){return ee().bundleInfo.browser}function oe(){return ee().bundleInfo.env}function se(){return ee().appConfig.url}function ae(){return ee().appConfig.gnar.appName}var ce;!function(e){e.TRACE="TRACE",e.DEBUG="DEBUG",e.INFO="INFO",e.WARN="WARN",e.ERROR="ERROR",e.FATAL="FATAL"}(ce||(ce={}));const ue={[ce.TRACE]:1,[ce.DEBUG]:2,[ce.INFO]:3,[ce.WARN]:4,[ce.ERROR]:5,[ce.FATAL]:6};function le(e){return ue[e]||0}class de{constructor(e){this.name=e,this._isError=e=>{const t=e;return t&&(void 0!==t.message&&void 0!==t.name||void 0!==t.stack)}}trace(e,t,n){this._logMessage(ce.TRACE,e,t,n)}debug(e,t,n){this._logMessage(ce.DEBUG,e,t,n)}info(e,t,n){this._logMessage(ce.INFO,e,t,n)}warn(e,t,n){this._logMessage(ce.WARN,e,t,n)}error(e,t,n){this._logMessage(ce.ERROR,e,t,n)}fatal(e,t,n){this._logMessage(ce.FATAL,e,t,n)}_logMessage(e,t,n,r){const i={level:e,loggerName:this.name,message:t,timestamp:new Date};n&&(this._isError(n)?i.exception=n:i.data=n),i.data=i.data||r,this.handleEvent(i)}}class he{constructor(e,t){this.name=e,this._createLogger=t}trace(e,t,n){void 0===this._logger&&(this._logger=this._createLogger(this.name)),this._logger.trace(e,t,n)}debug(e,t,n){void 0===this._logger&&(this._logger=this._createLogger(this.name)),this._logger.debug(e,t,n)}info(e,t,n){void 0===this._logger&&(this._logger=this._createLogger(this.name)),this._logger.info(e,t,n)}warn(e,t,n){void 0===this._logger&&(this._logger=this._createLogger(this.name)),this._logger.warn(e,t,n)}error(e,t,n){void 0===this._logger&&(this._logger=this._createLogger(this.name)),this._logger.error(e,t,n)}fatal(e,t,n){void 0===this._logger&&(this._logger=this._createLogger(this.name)),this._logger.fatal(e,t,n)}}class fe{constructor(e){if(this.capacity=e,this._start=0,this._end=0,this._isFull=!1,e<=0)throw new Error("Invalid capacity "+e);this._buffer=new Array(e)}get size(){return this._isFull?this._buffer.length:(this._end-this._start+this._buffer.length)%this._buffer.length}get isEmpty(){return 0===this.size}get isFull(){return this._isFull}get head(){return this.isEmpty?null:this._buffer[this._start]}get tail(){return this.isEmpty?null:this._buffer[0===this._end?this.capacity-1:this._end-1]}enqueue(e){let t=null;return this.isFull&&(t=this._buffer[this._start],this._startInc()),this._buffer[this._end]=e,this._endInc(),this._start===this._end&&(this._isFull=!0),t}dequeue(){if(this.isEmpty)return null;const e=this._buffer[this._start];return this._buffer[this._start]=null,this._startInc(),this._isFull=!1,e}delete(e){const t=this._buffer.indexOf(e);if(t>=0){if(t<this._end){for(let e=t;e<this._end-1;e++)this._buffer[e]=this._buffer[e+1];this._buffer[--this._end]=null}else{for(let e=this._start;e<t;e++)this._buffer[e+1]=this._buffer[e];this._buffer[this._start]=null,this._startInc()}return this._isFull=!1,!0}return!1}_startInc(){this._start++,this._start===this.capacity&&(this._start=0)}_endInc(){this._end++,this._end===this.capacity&&(this._end=0)}clear(){this._buffer=new Array(this.capacity),this._start=this._end=0,this._isFull=!1}toArray(){let e;if(this.isEmpty)e=[];else if(this._start<this._end)e=this._buffer.slice(this._start,this._end);else{e=new Array(this.size);let t=0;for(let n=this._start;n<this.capacity;++n,++t)e[t]=this._buffer[n];for(let n=0;n<this._end;++n,++t)e[t]=this._buffer[n]}return e}}let pe;class ge extends de{constructor(e,t,n){super(e),this._config=t,this._historyArgs=n,this._historyEnabled=()=>{var e;return Boolean("prod"!==oe()||(null===(e=this._historyArgs.enabledInProd)||void 0===e?void 0:e.get()))},this._setupHistoryDownload=()=>{var e;void 0===pe&&(pe=new fe(null!==(e=this._historyArgs.maxEventsToStore)&&void 0!==e?e:1e3),self.GRDownloadReport=()=>{var e,t,n;if(this._historyEnabled()){const r=e=>{try{return JSON.stringify(e)}catch(t){return`${e}`}},i=[["Level","Logger","Timestamp","Message"].join("\t"),...pe.toArray().map((e=>{const t=[e.level,e.loggerName,e.timestamp.toISOString(),e.message];return e.data&&t.push(r(e.data)),e.exception&&t.push(r(e.exception)),t.join("\t")}))].join("\n");if(self.document){const t=self.document.createElement("a");t.href="data:application/octet-stream,"+encodeURIComponent(i),t.target="_blank",t.download=null!==(e=this._historyArgs.downloadFileName)&&void 0!==e?e:"grammarly-logs.tsv",t.click()}null===(n=(t=this._historyArgs).onDownload)||void 0===n||n.call(t)}})},this._setupHistoryDownload()}handleEvent(e){this._config.filterFn(e)&&this._config.writer.write(e),this._historyEnabled()&&(null==pe||pe.enqueue(e))}}function me(e){return new Proxy({},{get(t,n){const r=e[n];return r&&"function"==typeof r?r.bind(e):void 0}})}class be{constructor(){this._writeFunc=be._commonWriteFunc}write(e){try{const t=[`grm ${e.level} 【${e.loggerName}】░░ ${e.message}`];e.data&&t.push(e.data),e.exception&&t.push(e.exception),this._writeFunc[e.level].apply(null,t)}catch(e){}}}be._commonWriteFunc=function(){const{log:e,info:t,warn:n,error:r}=me(console);return{[ce.TRACE]:e,[ce.DEBUG]:e,[ce.INFO]:t,[ce.WARN]:n,[ce.ERROR]:r,[ce.FATAL]:r}}();var ve=function(e,t){return(ve=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function ye(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}ve(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}Object.create;Object.create;function _e(e){return"function"==typeof e}var we=!1,xe={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack;we=e},get useDeprecatedSynchronousErrorHandling(){return we}};function Ee(e){setTimeout((function(){throw e}),0)}var Se={closed:!0,next:function(e){},error:function(e){if(xe.useDeprecatedSynchronousErrorHandling)throw e;Ee(e)},complete:function(){}},Ie=function(){return Array.isArray||function(e){return e&&"number"==typeof e.length}}();function Ae(e){return null!==e&&"object"==typeof e}var Te=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),Oe=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}return e.prototype.unsubscribe=function(){var t;if(!this.closed){var n=this,r=n._parentOrParents,i=n._ctorUnsubscribe,o=n._unsubscribe,s=n._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,r instanceof e)r.remove(this);else if(null!==r)for(var a=0;a<r.length;++a){r[a].remove(this)}if(_e(o)){i&&(this._unsubscribe=void 0);try{o.call(this)}catch(e){t=e instanceof Te?Ce(e.errors):[e]}}if(Ie(s)){a=-1;for(var c=s.length;++a<c;){var u=s[a];if(Ae(u))try{u.unsubscribe()}catch(e){t=t||[],e instanceof Te?t=t.concat(Ce(e.errors)):t.push(e)}}}if(t)throw new Te(t)}},e.prototype.add=function(t){var n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var r=n;(n=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof e){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[n]:o.push(n),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}();function Ce(e){return e.reduce((function(e,t){return e.concat(t instanceof Te?t.errors:t)}),[])}var ke=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),Re=function(e){function t(n,r,i){var o=e.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=Se;break;case 1:if(!n){o.destination=Se;break}if("object"==typeof n){n instanceof t?(o.syncErrorThrowable=n.syncErrorThrowable,o.destination=n,n.add(o)):(o.syncErrorThrowable=!0,o.destination=new Fe(o,n));break}default:o.syncErrorThrowable=!0,o.destination=new Fe(o,n,r,i)}return o}return ye(t,e),t.prototype[ke]=function(){return this},t.create=function(e,n,r){var i=new t(e,n,r);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(Oe),Fe=function(e){function t(t,n,r,i){var o,s=e.call(this)||this;s._parentSubscriber=t;var a=s;return _e(n)?o=n:n&&(o=n.next,r=n.error,i=n.complete,n!==Se&&(_e((a=Object.create(n)).unsubscribe)&&s.add(a.unsubscribe.bind(a)),a.unsubscribe=s.unsubscribe.bind(s))),s._context=a,s._next=o,s._error=r,s._complete=i,s}return ye(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;xe.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=xe.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):Ee(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;Ee(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};xe.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),xe.useDeprecatedSynchronousErrorHandling)throw e;Ee(e)}},t.prototype.__tryOrSetError=function(e,t,n){if(!xe.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(t){return xe.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0,!0):(Ee(t),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(Re);var Ne=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function Pe(e){return e}function Me(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return De(e)}function De(e){return 0===e.length?Pe:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var je=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r=this.operator,i=function(e,t,n){if(e){if(e instanceof Re)return e;if(e[ke])return e[ke]()}return e||t||n?new Re(e,t,n):new Re(Se)}(e,t,n);if(r?i.add(r.call(i,this.source)):i.add(this.source||xe.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),xe.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){xe.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),!function(e){for(;e;){var t=e,n=t.closed,r=t.destination,i=t.isStopped;if(n||i)return!1;e=r&&r instanceof Re?r:null}return!0}(e)?console.warn(t):e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=Ue(t))((function(t,r){var i;i=n.subscribe((function(t){try{e(t)}catch(e){r(e),i&&i.unsubscribe()}}),r,t)}))},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[Ne]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:De(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=Ue(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function Ue(e){if(e||(e=xe.Promise||Promise),!e)throw new Error("no Promise impl found");return e}var Le=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}(),Be=function(e){function t(t,n){var r=e.call(this)||this;return r.subject=t,r.subscriber=n,r.closed=!1,r}return ye(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}},t}(Oe),$e=function(e){function t(t){var n=e.call(this,t)||this;return n.destination=t,n}return ye(t,e),t}(Re),Ve=function(e){function t(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return ye(t,e),t.prototype[ke]=function(){return new $e(this)},t.prototype.lift=function(e){var t=new We(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new Le;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].next(e)},t.prototype.error=function(e){if(this.closed)throw new Le;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new Le;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new Le;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new Le;return this.hasError?(e.error(this.thrownError),Oe.EMPTY):this.isStopped?(e.complete(),Oe.EMPTY):(this.observers.push(e),new Be(this,e))},t.prototype.asObservable=function(){var e=new je;return e.source=this,e},t.create=function(e,t){return new We(e,t)},t}(je),We=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return ye(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):Oe.EMPTY},t}(Ve),Ge=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return ye(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return n&&!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Le;return this._value},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(Ve);function qe(){}var He=function(){function e(e,t,n){this.nextOrObserver=e,this.error=t,this.complete=n}return e.prototype.call=function(e,t){return t.subscribe(new ze(e,this.nextOrObserver,this.error,this.complete))},e}(),ze=function(e){function t(t,n,r,i){var o=e.call(this,t)||this;return o._tapNext=qe,o._tapError=qe,o._tapComplete=qe,o._tapError=r||qe,o._tapComplete=i||qe,_e(n)?(o._context=o,o._tapNext=n):n&&(o._context=n,o._tapNext=n.next||qe,o._tapError=n.error||qe,o._tapComplete=n.complete||qe),o}return ye(t,e),t.prototype._next=function(e){try{this._tapNext.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.next(e)},t.prototype._error=function(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)},t.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()},t}(Re);function Ke(){return function(e){return e.lift(new Je(e))}}var Je=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var n=this.connectable;n._refCount++;var r=new Ye(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i},e}(),Ye=function(e){function t(t,n){var r=e.call(this,t)||this;return r.connectable=n,r}return ye(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var n=this.connection,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},t}(Re),Xe=function(e){function t(t,n){var r=e.call(this)||this;return r.source=t,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return ye(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new Oe).add(this.source.subscribe(new Ze(this.getSubject(),this))),e.closed&&(this._connection=null,e=Oe.EMPTY)),e},t.prototype.refCount=function(){return Ke()(this)},t}(je),Qe=function(){var e=Xe.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}}(),Ze=function(e){function t(t,n){var r=e.call(this,t)||this;return r.connectable=n,r}return ye(t,e),t.prototype._error=function(t){this._unsubscribe(),e.prototype._error.call(this,t)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},t}($e);var et=function(){function e(e,t){this.subjectFactory=e,this.selector=t}return e.prototype.call=function(e,t){var n=this.selector,r=this.subjectFactory(),i=n(r).subscribe(e);return i.add(t.subscribe(r)),i},e}();function tt(){return new Ve}function nt(){return function(e){return Ke()((t=tt,function(e){var r;if(r="function"==typeof t?t:function(){return t},"function"==typeof n)return e.lift(new et(r,n));var i=Object.create(e,Qe);return i.source=e,i.subjectFactory=r,i})(e));var t,n}}function rt(e,t){return function(n){return n.lift(new at(e,t))}}var it,ot,st,at=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new ct(e,this.predicate,this.thisArg))},e}(),ct=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.predicate=n,i.thisArg=r,i.count=0,i}return ye(t,e),t.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}t&&this.destination.next(e)},t}(Re);function ut(e,t){return function(n,r){return t(n(e(r)),r)}}function lt(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}function dt(e,t){return Object.prototype.hasOwnProperty.call(t,e)}function ht(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}!function(e){e.optic=function(e,t){return{get:e,set:t,modify:ut(e,t)}}}(it||(it={})),function(e){e.create=function e(t,n){return{get:t,set:n,modify:ut(t,n),compose:function(r){return e((function(e){var n=t(e);return void 0!==n?r.get(n):void 0}),(function(e,i){var o=t(i);return void 0!==o?n(r.set(e,o),i):i}))}}}}(ot||(ot={})),function(e){function t(e,n){return{get:e,set:n,modify:ut(e,n),compose:function(r){return t((function(t){return r.get(e(t))}),(function(t,i){return n(r.set(t,e(i)),i)}))}}}e.create=t,e.compose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)throw new TypeError("Can not compose zero lenses. You probably want `Lens.identity`.");if(1===e.length)return e[0];var n=e[0];return e.slice(1).forEach((function(e){n=n.compose(e)})),n};var n=t((function(e){return e}),(function(e,t){return e}));e.identity=function(){return n};var r=ot.create((function(e){}),(function(e,t){return t}));e.nothing=function(){return r}}(st||(st={}));var ft,pt,gt,mt,bt=function(){var e=Object.prototype.toString;return"[object Arguments]"===e.call(arguments)?function(t){return"[object Arguments]"===e.call(t)}:function(e){return dt("callee",e)}}(),vt=(ft=!{toString:null}.propertyIsEnumerable("toString"),pt=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],gt=function(){return arguments.propertyIsEnumerable("length")}(),mt=function(e,t){for(var n=0;n<e.length;){if(e[n]===t)return!0;n+=1}return!1},"function"!=typeof Object.keys||gt?function(e){if(Object(e)!==e)return[];var t,n,r=[],i=gt&&bt(e);for(t in e)!dt(t,e)||i&&"length"===t||(r[r.length]=t);if(ft)for(n=pt.length-1;n>=0;)dt(t=pt[n],e)&&!mt(r,t)&&(r[r.length]=t),n-=1;return r}:function(e){return Object(e)!==e?[]:Object.keys(e)});function yt(e){return null===e?"Null":void 0===e?"Undefined":Object.prototype.toString.call(e).slice(8,-1)}function _t(e,t,n,r){if(void 0===n&&(n=[]),void 0===r&&(r=[]),ht(e,t))return!0;if(yt(e)!==yt(t))return!1;if(null==e||null==t)return!1;if("function"==typeof e.equals||"function"==typeof t.equals)return"function"==typeof e.equals&&e.equals(t)&&"function"==typeof t.equals&&t.equals(e);switch(yt(e)){case"Arguments":case"Array":case"Object":if("function"==typeof e.constructor&&"Promise"===(i=e.constructor,null==(o=String(i).match(/^function (\w*)/))?"":o[1]))return e===t;break;case"Boolean":case"Number":case"String":if(typeof e!=typeof t||!ht(e.valueOf(),t.valueOf()))return!1;break;case"Date":if(!ht(e.valueOf(),t.valueOf()))return!1;break;case"Error":return e.name===t.name&&e.message===t.message;case"RegExp":if(e.source!==t.source||e.global!==t.global||e.ignoreCase!==t.ignoreCase||e.multiline!==t.multiline||e.sticky!==t.sticky||e.unicode!==t.unicode)return!1;break;case"Map":case"Set":if(!_t(lt(e.entries()),lt(t.entries()),n,r))return!1;break;case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var i,o,s=vt(e);if(s.length!==vt(t).length)return!1;for(var a=n.length-1;a>=0;){if(n[a]===e)return r[a]===t;a-=1}for(n.push(e),r.push(t),a=s.length-1;a>=0;){var c=s[a];if(!dt(c,t)||!_t(t[c],e[c],n,r))return!1;a-=1}return n.pop(),r.pop(),!0}var wt=void 0!==n(27061)&&!1;function xt(e,t,n){if(e in n&&_t(t,n[e]))return n;var r={};for(var i in n)r[i]=n[i];return r[e]=t,r}function Et(e){return function(t,n){return function(e,t){return _t(e,t)?t:e}(e(t,n),n)}}var St=new RegExp(["^","function","\\(","[^), ]+","\\)","\\{",'("use strict";)?',"return\\s","[^\\.]+\\.(\\S+?);?","\\}","$"].join("\\s*"));new RegExp(["^","function","\\(","[^), ]+","\\)","\\{",'("use strict";)?',"(\\$_\\$wf\\(\\d+\\);)?","return\\s","(\\$_\\$w\\(\\d+, \\d+\\),\\s)?","[^\\.]+\\.(\\S+?);?","\\}","$"].join("\\s*"));function It(e){return function(e){var t=St,n=e.match(t);if(n&&n[2])return n[2].split(".");throw new TypeError('Expected a property expression, got "'+e+'".\n\n      A property expression should be a referentially transparent (no side-effects),\n      single-expression "getter" function.\n\n      Correct example: "function (x) { return x.some }" or "x => x.some".\n      Incorrect example: "function (x) { var y = x.some; return y }" or "({some}) => some"')}(e.toString())}function At(e){return void 0===e?function(e){return st.create((function(t){return t[e]}),(function(t,n){return xt(e,t,n)}))}:st.create((function(t){return t[e]}),(function(t,n){return xt(e,t,n)}))}var Tt=0;function Ot(e){if(Tt<10){Tt++;var t="x."+e.join("."),n="'"+e.join("', '")+"'";!function(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error("[Focal]: "+e);try{throw new Error(e)}catch(e){}}("The property expression overload of Atom.lens and Lens.prop are deprecated and will be removed in next versions of Focal. Please use the key name overload for Atom.lens and Lens.key instead. You can convert your code by changing the calls:\n  a.lens(x => "+t+") to a.lens("+n+"),\n  Lens.prop((x: T) => "+t+") to Lens.key<T>()("+n+").")}}function Ct(e){return e&&"function"==typeof e.schedule}st.key=At,st.prop=function(e){var t=It(e);return wt&&Ot(t),st.compose.apply(st,t.map(At()))},st.index=function(e){if(e<0)throw new TypeError(e+" is not a valid array index, expected >= 0");return ot.create((function(t){return t[e]}),(function(t,n){return n.length<=e?n.concat(Array(e-n.length),[t]):_t(t,n[e])?n:n.slice(0,e).concat([t],n.slice(e+1))}))},st.withDefault=function(e){return st.replace(void 0,e)},st.replace=function(e,t){return st.create((function(n){return _t(n,e)?t:n}),Et((function(n){return _t(n,t)?e:n})))},st.find=function(e){return t=function(t){var n=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1}(t,e);return n<0?st.nothing():st.index(n)},st.create((function(e){return t(e).get(e)}),(function(e,n){return t(n).set(e,n)}));var t};var kt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ye(t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(Re),Rt=function(e){function t(t,n,r){var i=e.call(this)||this;return i.parent=t,i.outerValue=n,i.outerIndex=r,i.index=0,i}return ye(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(Re),Ft=function(e){return function(t){for(var n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()}};function Nt(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var Pt=Nt(),Mt=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function Dt(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}var jt=function(e){if(e&&"function"==typeof e[Ne])return r=e,function(e){var t=r[Ne]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if(Mt(e))return Ft(e);if(Dt(e))return n=e,function(e){return n.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,Ee),e};if(e&&"function"==typeof e[Pt])return t=e,function(e){for(var n=t[Pt]();;){var r=void 0;try{r=n.next()}catch(t){return e.error(t),e}if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"==typeof n.return&&e.add((function(){n.return&&n.return()})),e};var t,n,r,i=Ae(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+i+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function Ut(e,t,n,r,i){if(void 0===i&&(i=new Rt(e,n,r)),!i.closed)return t instanceof je?t.subscribe(i):jt(t)(i)}function Lt(e,t){return new je((function(n){var r=new Oe,i=0;return r.add(t.schedule((function(){i!==e.length?(n.next(e[i++]),n.closed||r.add(this.schedule())):n.complete()}))),r}))}function Bt(e,t){return t?Lt(e,t):new je(Ft(e))}var $t={};function Vt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=void 0,r=void 0;return Ct(e[e.length-1])&&(r=e.pop()),"function"==typeof e[e.length-1]&&(n=e.pop()),1===e.length&&Ie(e[0])&&(e=e[0]),Bt(e,r).lift(new qt(n))}var Wt,Gt,qt=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new Ht(e,this.resultSelector))},e}(),Ht=function(e){function t(t,n){var r=e.call(this,t)||this;return r.resultSelector=n,r.active=0,r.values=[],r.observables=[],r}return ye(t,e),t.prototype._next=function(e){this.values.push($t),this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var n=0;n<t;n++){var r=e[n];this.add(Ut(this,r,void 0,n))}}},t.prototype.notifyComplete=function(e){0==(this.active-=1)&&this.destination.complete()},t.prototype.notifyNext=function(e,t,n){var r=this.values,i=r[n],o=this.toRespond?i===$t?--this.toRespond:this.toRespond:0;r[n]=t,0===o&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))},t.prototype._tryResultSelector=function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(kt),zt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Kt=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r},Jt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return zt(t,e),t.prototype.view=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return void 0!==e[0]?"function"==typeof e[0]?new Zt(this,e[0]):"string"==typeof e[0]?new Zt(this,st.compose.apply(st,e.map(st.key())).get):new Zt(this,(function(t){return e[0].get(t)})):this},t}(Ge),Yt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return zt(t,e),t.prototype.set=function(e){this.modify((function(){return e}))},t.prototype.lens=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return new Qt(this,"function"==typeof e?st.prop(e):"string"==typeof e?st.compose.apply(st,Kt([st.key(e)],t.map((function(e){return st.key(e)})))):e,_t)},t}(Jt),Xt=function(e){function t(t){return e.call(this,t)||this}return zt(t,e),t.prototype.get=function(){return this.getValue()},t.prototype.modify=function(e){var t=this.getValue(),n=e(t);_t(t,n)||this.next(n)},t.prototype.set=function(e){_t(this.getValue(),e)||this.next(e)},t}(Yt),Qt=function(e){function t(t,n,r){void 0===r&&(r=_t);var i=e.call(this,void 0)||this;return i._source=t,i._lens=n,i._eq=r,i._subscription=null,i._refCount=0,i}return zt(t,e),t.prototype.get=function(){return this._subscription?this.getValue():this._lens.get(this._source.get())},t.prototype.modify=function(e){var t=this;this._source.modify((function(n){return t._lens.modify(e,n)}))},t.prototype.set=function(e){var t=this;this._source.modify((function(n){return t._lens.set(e,n)}))},t.prototype._onSourceValue=function(e){var t=this.getValue(),n=this._lens.get(e);this._eq(t,n)||this.next(n)},t.prototype._subscribe=function(t){var n=this;this._subscription||(this._subscription=this._source.subscribe((function(e){return n._onSourceValue(e)}))),this._refCount++;var r=new Oe((function(){--n._refCount<=0&&n._subscription&&(n._subscription.unsubscribe(),n._subscription=null)}));return r.add(e.prototype._subscribe.call(this,t)),r},t.prototype.unsubscribe=function(){this._subscription&&(this._subscription.unsubscribe(),this._subscription=null),this._refCount=0,e.prototype.unsubscribe.call(this)},t}(Yt),Zt=function(e){function t(t,n,r){void 0===r&&(r=_t);var i=e.call(this,void 0)||this;return i._source=t,i._getter=n,i._eq=r,i._subscription=null,i._refCount=0,i}return zt(t,e),t.prototype.get=function(){return this._subscription?this.getValue():this._getter(this._source.get())},t.prototype._onSourceValue=function(e){var t=this.getValue(),n=this._getter(e);this._eq(t,n)||this.next(n)},t.prototype._subscribe=function(t){var n=this;this._subscription||(this._subscription=this._source.subscribe((function(e){return n._onSourceValue(e)}))),this._refCount++;var r=new Oe((function(){--n._refCount<=0&&n._subscription&&(n._subscription.unsubscribe(),n._subscription=null)}));return r.add(e.prototype._subscribe.call(this,t)),r},t.prototype.unsubscribe=function(){this._subscription&&(this._subscription.unsubscribe(),this._subscription=null),this._refCount=0,e.prototype.unsubscribe.call(this)},t}(Jt),en=function(e){function t(t,n,r){void 0===r&&(r=_t);var i=e.call(this,void 0)||this;return i._sources=t,i._combineFn=n,i._eq=r,i._subscription=null,i._refCount=0,i}return zt(t,e),t.prototype.get=function(){return this._subscription?this.getValue():this._combineFn(this._sources.map((function(e){return e.get()})))},t.prototype._onSourceValues=function(e){var t=this.getValue(),n=this._combineFn(e);this._eq(t,n)||this.next(n)},t.prototype._subscribe=function(t){var n=this;this._subscription||(this._subscription=Vt(this._sources).subscribe((function(e){return n._onSourceValues(e)}))),this._refCount++;var r=new Oe((function(){--n._refCount<=0&&n._subscription&&(n._subscription.unsubscribe(),n._subscription=null)}));return r.add(e.prototype._subscribe.call(this,t)),r},t.prototype.unsubscribe=function(){this._subscription&&(this._subscription.unsubscribe(),this._subscription=null),this._refCount=0,e.prototype.unsubscribe.call(this)},t}(Jt);!function(e){e.create=function(e){return new Xt(e)},e.log=function(e,t){var n=function(e,t,n){return console.log("%c"+e,"color: "+t+"; font-weight: bold",n)},r=e.get();return e.subscribe((function(e){"function"==typeof t?t(r,e):(console.group("UPDATE "+(t?"TYPE: "+t+" ":"")+"@ "+(new Date).toTimeString()),n("prev state","#9E9E9E",r),n("next state","#4CAF50",e),console.groupEnd()),r=e})),e},e.combine=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new en(e.slice(void 0,-1),(function(t){return e[e.length-1].apply(e,t)}))},e.fromObservable=function(t){var n,r,i,o=new Ge(null),s=t.pipe((n=function(t){var n=o.value;null===n?o.next(e.create(t)):n.set(t)},function(e){return e.lift(new He(n,r,i))}),nt());return new je((function(e){var t=new Oe;return t.add(o.pipe(rt((function(e){return!!e}))).subscribe(e)),t.add(s.subscribe(void 0,(function(t){return e.error(t)}),(function(){return e.complete()}))),t}))}}(Wt||(Wt={}));class tn{constructor(e,t=Wt.create(!1)){this._enableHistoryLoggerInProd=t,this.enableHistoryLoggerInProd=()=>{this._enableHistoryLoggerInProd.get()||this._enableHistoryLoggerInProd.set(!0)};const n=e.testArgs,r=n&&n.processEnv?n.processEnv:Y.fromBrowserify(),i=X.getTargetEnv(r),o="prod"!==i||"cs"!==e.context,s={create(n){return new ge(n,{writer:new be,filterFn:o?e=>!0:(r=ce.ERROR,e=>le(e.level)>=le(r))},{...e.historyLoggerExtraArgs,enabledInProd:t});var r}},a=function(e,t,n,r,i){const o=X.create(e,t,n,r,i);return Q.init(o),self.GR_CFG=Q.get(),o}(e.browser,e.extensionType,e.context,r,i);this.config=a,this.logger=s}static getInstance(){if(void 0===this._instanceShared)throw new Error("Env not inited yet");return this._instanceShared}static initShared(e){if(void 0!==this._instanceShared)throw new Error("Env already inited");this._instanceShared=e}}function nn(){return tn.getInstance()}!function(e){e.create=function(e){return new he(e,(()=>nn().logger.create(e)))}}(Gt||(Gt={}));const rn=Gt.create("extension-api");let on;function sn(e){if(on)return on;return on=e,e}function an(){return on||sn((re()?R(self.extensionBackgroundPageApi,"background page extension api was not initialized"):R(self.extensionContentScriptApi,"content script extension api was not initialized")).message)}const cn=function(e){const t={},n=e||{};return n.emit=function(e,n){e=r(e);const i=t[e];if(!i)return;const o=i.concat();for(let e=0;e<o.length;e++)o[e](n)},n.emitArgs=function(e){e=r(e);const n=t[e],i=[].slice.call(arguments,1);if(!n)return;const o=n.concat();for(let e=0;e<o.length;e++)o[e].apply(null,i)},n.on=function(e,i){return e=r(e),t[e]=t[e]||[],t[e].push(i),{un:function(){n.un(e,i)}}},n.off=n.un=function(e,n){e=r(e);const i=t[e];if(!i)return;const o=i.indexOf(n);o>-1&&(i.splice(o,1),i.length>0||delete t[e])},n.one=function(e,t){const r=n.on(e,((...e)=>{r.un(),t.apply(null,e)}))},n.delegate=function(e,t,i){t=r(t),n.on(t,(function(n){e.emit(i||t,n)}))},n;function r(e){return"string"!=typeof e?e.join(" "):e}}({}),un={};function ln(e){const t=an();"content-script-message-api"===t.kind&&t.onBackgroundPortReconnect&&t.onBackgroundPortReconnect(e)}const dn=A(1e3,(e=>cn.emit("__bgerror",e)));function hn(e){sn(e),self.document&&s(self.document,"grammarly:offline",(()=>dn("proxy dead")),void 0)}function fn(e,t){pn(e,(function n(...r){gn(e,n),t.apply(this,r)}))}function pn(e,t){if("__bgerror"===e)return void cn.on("__bgerror",t);const n=un[e]=un[e]||[];if(n.push(t),1===n.length)try{an().listen(e,((...e)=>{for(const t of n)t(...e)}))}catch(e){dn(e)}}function gn(e,t){if("__bgerror"===e)return void cn.off("__bgerror",t);const n=un[e];if(!n)return;const r=n.indexOf(t);-1!==r&&n.splice(r,1),0===n.length&&delete un[e]}function mn(e){try{const t=an();switch(t.kind){case"background-message-api":t.broadcast(e,{});break;default:throw new Error("emitTabs can be used only on background")}}catch(e){dn(e)}}function bn(e,t,n={},r=E,i=E,o){try{if(!e)throw TypeError("emitTo can't be used without destination point");const s=an();switch(s.kind){case"background-message-api":s.sendTo(e,t,n,r,i,o);break;default:throw new Error("emitTo can be used only on background")}}catch(e){dn(e)}}function vn(){const e=an();if("background-message-api"===e.kind)return e.topFrameId;throw new Error("topFrameId can only be retreived on background")}function yn(e,t){try{an().toFocused(e,t)}catch(e){dn(e)}}function _n(e,t,n,r){try{const i=an();switch(i.kind){case"content-script-message-api":i.broadcastBackground(e,t,n,r);break;default:throw new Error("emitBackground can be used only in content script")}}catch(e){dn(e)}}function wn(e,t={},n=1e4){const r=new Promise(((n,r)=>{try{const i=an();switch(i.kind){case"content-script-message-api":i.broadcastBackground(e,t,n,r);break;default:throw new Error("promiseBackground can be used only on client scripts")}}catch(e){r(e),dn(e)}}));return Promise.race([r,(i=n,new Promise((e=>setTimeout(e,i)))).then((()=>{throw new Error(`Request to bg page (${on}) rejected by timeout`)}))]);var i}function xn(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new En(e,t))}}var En=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new Sn(e,this.project,this.thisArg))},e}(),Sn=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.project=n,i.count=0,i.thisArg=r||i,i}return ye(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(Re);function In(e,t,n,r){return _e(n)&&(r=n,n=void 0),r?In(e,t,n).pipe(xn((function(e){return Ie(e)?r.apply(void 0,e):r(e)}))):new je((function(r){An(e,t,(function(e){arguments.length>1?r.next(Array.prototype.slice.call(arguments)):r.next(e)}),r,n)}))}function An(e,t,n,r,i){var o;if(function(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(e)){var s=e;e.addEventListener(t,n,i),o=function(){return s.removeEventListener(t,n,i)}}else if(function(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(e)){var a=e;e.on(t,n),o=function(){return a.off(t,n)}}else if(function(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(e)){var c=e;e.addListener(t,n),o=function(){return c.removeListener(t,n)}}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(var u=0,l=e.length;u<l;u++)An(e[u],t,n,r,i)}r.add(o)}var Tn=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return ye(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n=!1,r=void 0;try{this.work(e)}catch(e){n=!0,r=!!e&&e||new Error(e)}if(n)return this.unsubscribe(),r},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},t}(function(e){function t(t,n){return e.call(this)||this}return ye(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(Oe)),On=function(){function e(t,n){void 0===n&&(n=e.now),this.SchedulerAction=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(n,t)},e.now=function(){return Date.now()},e}(),Cn=function(e){function t(n,r){void 0===r&&(r=On.now);var i=e.call(this,n,(function(){return t.delegate&&t.delegate!==i?t.delegate.now():r()}))||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return ye(t,e),t.prototype.schedule=function(n,r,i){return void 0===r&&(r=0),t.delegate&&t.delegate!==this?t.delegate.schedule(n,r,i):e.prototype.schedule.call(this,n,r,i)},t.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(On),kn=new Cn(Tn);function Rn(e){return!Ie(e)&&e-parseFloat(e)+1>=0}function Fn(e,t){return void 0===e&&(e=0),void 0===t&&(t=kn),(!Rn(e)||e<0)&&(e=0),t&&"function"==typeof t.schedule||(t=kn),new je((function(n){return n.add(t.schedule(Nn,e,{subscriber:n,counter:0,period:e})),n}))}function Nn(e){var t=e.subscriber,n=e.counter,r=e.period;t.next(n),this.schedule({subscriber:t,counter:n+1,period:r},r)}var Pn=function(){function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e}(),Mn=function(){function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e}(),Dn=new je((function(e){return e.complete()}));function jn(e){return e?function(e){return new je((function(t){return e.schedule((function(){return t.complete()}))}))}(e):Dn}function Un(e){return function(t){return 0===e?jn():t.lift(new Ln(e))}}var Ln=function(){function e(e){if(this.total=e,this.total<0)throw new Mn}return e.prototype.call=function(e,t){return t.subscribe(new Bn(e,this.total))},e}(),Bn=function(e){function t(t,n){var r=e.call(this,t)||this;return r.total=n,r.count=0,r}return ye(t,e),t.prototype._next=function(e){var t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))},t}(Re);function $n(e){return void 0===e&&(e=null),function(t){return t.lift(new Vn(e))}}var Vn=function(){function e(e){this.defaultValue=e}return e.prototype.call=function(e,t){return t.subscribe(new Wn(e,this.defaultValue))},e}(),Wn=function(e){function t(t,n){var r=e.call(this,t)||this;return r.defaultValue=n,r.isEmpty=!0,r}return ye(t,e),t.prototype._next=function(e){this.isEmpty=!1,this.destination.next(e)},t.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},t}(Re);function Gn(e){return void 0===e&&(e=zn),function(t){return t.lift(new qn(e))}}var qn=function(){function e(e){this.errorFactory=e}return e.prototype.call=function(e,t){return t.subscribe(new Hn(e,this.errorFactory))},e}(),Hn=function(e){function t(t,n){var r=e.call(this,t)||this;return r.errorFactory=n,r.hasValue=!1,r}return ye(t,e),t.prototype._next=function(e){this.hasValue=!0,this.destination.next(e)},t.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var e=void 0;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)},t}(Re);function zn(){return new Pn}function Kn(e,t){var n=arguments.length>=2;return function(r){return r.pipe(e?rt((function(t,n){return e(t,n,r)})):Pe,Un(1),n?$n(t):Gn((function(){return new Pn})))}}var Jn=function(){function e(e){this.value=e}return e.prototype.call=function(e,t){return t.subscribe(new Yn(e,this.value))},e}(),Yn=function(e){function t(t,n){var r=e.call(this,t)||this;return r.value=n,r}return ye(t,e),t.prototype._next=function(e){this.destination.next(this.value)},t}(Re);function Xn(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[e.length-1];return Ct(n)?(e.pop(),Lt(e,n)):Bt(e)}function Qn(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[Ne]}(e))return function(e,t){return new je((function(n){var r=new Oe;return r.add(t.schedule((function(){var i=e[Ne]();r.add(i.subscribe({next:function(e){r.add(t.schedule((function(){return n.next(e)})))},error:function(e){r.add(t.schedule((function(){return n.error(e)})))},complete:function(){r.add(t.schedule((function(){return n.complete()})))}}))}))),r}))}(e,t);if(Dt(e))return function(e,t){return new je((function(n){var r=new Oe;return r.add(t.schedule((function(){return e.then((function(e){r.add(t.schedule((function(){n.next(e),r.add(t.schedule((function(){return n.complete()})))})))}),(function(e){r.add(t.schedule((function(){return n.error(e)})))}))}))),r}))}(e,t);if(Mt(e))return Lt(e,t);if(function(e){return e&&"function"==typeof e[Pt]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new je((function(n){var r,i=new Oe;return i.add((function(){r&&"function"==typeof r.return&&r.return()})),i.add(t.schedule((function(){r=e[Pt](),i.add(t.schedule((function(){if(!n.closed){var e,t;try{var i=r.next();e=i.value,t=i.done}catch(e){return void n.error(e)}t?n.complete():(n.next(e),this.schedule())}})))}))),i}))}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}function Zn(e,t){return t?Qn(e,t):e instanceof je?e:new je(jt(e))}var er=function(e){function t(t){var n=e.call(this)||this;return n.parent=t,n}return ye(t,e),t.prototype._next=function(e){this.parent.notifyNext(e)},t.prototype._error=function(e){this.parent.notifyError(e),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},t}(Re),tr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ye(t,e),t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(){this.destination.complete()},t}(Re);function nr(e,t){if(!t.closed)return e instanceof je?e.subscribe(t):jt(e)(t)}function rr(e,t,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof t?function(r){return r.pipe(rr((function(n,r){return Zn(e(n,r)).pipe(xn((function(e,i){return t(n,e,r,i)})))}),n))}:("number"==typeof t&&(n=t),function(t){return t.lift(new ir(e,n))})}var ir=function(){function e(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=t}return e.prototype.call=function(e,t){return t.subscribe(new or(e,this.project,this.concurrent))},e}(),or=function(e){function t(t,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var i=e.call(this,t)||this;return i.project=n,i.concurrent=r,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return ye(t,e),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(e){return void this.destination.error(e)}this.active++,this._innerSub(t)},t.prototype._innerSub=function(e){var t=new er(this),n=this.destination;n.add(t);var r=nr(e,t);r!==t&&n.add(r)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyComplete=function(){var e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(tr);function sr(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),rr(Pe,e)}function ar(){return sr(1)}function cr(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return ar()(Xn.apply(void 0,e))}function ur(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[e.length-1];return Ct(n)?(e.pop(),function(t){return cr(e,t,n)}):function(t){return cr(e,t)}}function lr(e,t){return function(n){return n.lift(new dr(e,t))}}var dr=function(){function e(e,t){this.compare=e,this.keySelector=t}return e.prototype.call=function(e,t){return t.subscribe(new hr(e,this.compare,this.keySelector))},e}(),hr=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.keySelector=r,i.hasKey=!1,"function"==typeof n&&(i.compare=n),i}return ye(t,e),t.prototype.compare=function(e,t){return e===t},t.prototype._next=function(e){var t;try{var n=this.keySelector;t=n?n(e):e}catch(e){return this.destination.error(e)}var r=!1;if(this.hasKey)try{r=(0,this.compare)(this.key,t)}catch(e){return this.destination.error(e)}else this.hasKey=!0;r||(this.key=t,this.destination.next(e))},t}(Re);class fr{constructor(){this._storage=this._storage||{}}get _storage(){return self.__CS_SHARE_STORAGE__}set _storage(e){self.__CS_SHARE_STORAGE__=e}clean(){this._storage={}}set(e,t){this._storage[e]=t}get(e){return this._storage[e]}getOnce(e){const t=this._storage[e];return this.remove(e),t}remove(e){delete this._storage[e]}}class pr{constructor(e,t,n=O.create(),r=e){this._rpcMessageName=e,this._message=t,this._clientId=n,this._inboundMessageName=r,this.inbound=new je((e=>{const t=t=>{t.clientId===this._clientId&&e.next(t.data)};return this._message.on(this._inboundMessageName,t),()=>this._message.off(this._inboundMessageName,t)})),this.outbound=e=>{this._message.emitBackground(this._rpcMessageName,{clientId:this._clientId,data:e})}}}class gr extends class{constructor(e,t){this._transport=e,this._log=t,this._calls=new Map,this._sub=this._transport.inbound.subscribe((e=>{var t;const n=this._calls.get(e.id);if(n)try{"err"in e?n.reject(e.err):n.resolve(e.res)}finally{this._calls.delete(e.id)}else null===(t=this._log)||void 0===t||t.warn(`received rpc call response for unregistered call ${e.id}`)})),this.api=new Proxy({},{get:(e,t)=>"then"===t?void 0:(...e)=>this._handleCall(t,e)})}_handleCall(e,t){let n=O.create();for(;this._calls.has(n);)n=O.create();const r=g.createCompletionSource();return this._calls.set(n,r),this._transport.outbound({id:n,method:e,args:t}),r.promise}dispose(){this._sub.unsubscribe()}}{constructor(e){super(new pr("cs-to-bg-rpc-1557421403805",e))}}function mr(e){return"tunnel"!==e.tag}var br;!function(e){e.isSubscribe=e=>"action"in e.data&&"subscribe"===e.data.action,e.isUnsubscribe=e=>"action"in e.data&&"unsubscribe"===e.data.action,e.isDispose=e=>"action"in e.data&&"dispose"===e.data.action,e.isPong=e=>"pong"in e.data,e.isPing=e=>"ping"in e.data,e.isObservableResult=e=>"subscribableId"in e}(br||(br={}));const vr=Symbol();var yr;function _r(e){return e instanceof je?e:new je((t=>e.subscribe(t)))}!function(e){e.measure=e=>t=>new je((n=>t.subscribe((t=>e((()=>n.next(t)))),(e=>n.error(e)),(()=>n.complete())))),e.using=(e,t)=>function(e,t){return new je((function(n){var r,i;try{r=e()}catch(e){return void n.error(e)}try{i=t(r)}catch(e){return void n.error(e)}var o=(i?Zn(i):Dn).subscribe(n);return function(){o.unsubscribe(),r&&r.unsubscribe()}}))}(e,t),e.doNothing=e=>e}(yr||(yr={}));class wr{constructor(e,t,n=Gt.create(wr.name),r){this._transport=e,this._observableTransport=t,this._log=n,this._serverId=r,this._calls=new Map,this._subscribeRelatedCalls=new Map,this._observables=new Map,this._subscribers=new Map,this._transportSubscription=_r(this._transport.inbound).pipe(rt(mr)).subscribe((e=>{this._processResponse(e)})),this._observableTransportSubscription=_r(this._observableTransport.inbound).pipe(rt(mr)).subscribe((e=>{this._processObservableMessage(e)})),this.api=new Proxy({},{get:(e,t)=>"then"===t?void 0:(...e)=>this._handleCall(t,e)})}_processResponse(e){const t=this._calls.get(e.id);if(t)try{if("err"in e)t.reject(e.err);else if(br.isObservableResult(e))try{const n=new je((t=>this._createSubscribeHandler(e.subscribableId,t)));this._observables.set(e.subscribableId,n),t.resolve(n)}catch(t){this._observables.delete(e.subscribableId)}else t.resolve(this.transformResult(e.res))}finally{this._calls.delete(e.id)}else this._log.warn(`received rpc call response for unregistered call ${e.id}`)}transformResult(e){return e}_processObservableMessage(e){if("subscribed"in e){const t=this._subscribeRelatedCalls.get(e.id);if(t)try{t.resolve()}finally{this._subscribeRelatedCalls.delete(e.id)}else this._log.warn(`received rpc call subscribed response for unregistered subscribe call ${e.id}`)}else if("unsubscribed"in e){const t=this._subscribeRelatedCalls.get(e.id);if(t)try{t.resolve()}finally{this._subscribeRelatedCalls.delete(e.id),this._subscribers.delete(e.id)}else this._log.warn(`received rpc call unsubscribed response for unregistered unsubscribe call ${e.id}`)}else if("next"in e)try{const t=this._subscribers.get(e.subscriptionId);t?t.subscriber.next(e.next):this._log.warn(`received observable next message for unregistered subscription ${e.subscriptionId}`)}catch(t){this._subscribers.delete(e.subscriptionId)}else if("complete"in e)try{const t=this._subscribers.get(e.subscriptionId);t?(t.subscriber.complete(),this._subscribers.delete(e.subscriptionId)):this._log.warn(`received observable complete for unregistered subscription ${e.subscriptionId}`)}catch(t){this._subscribers.delete(e.subscriptionId)}else if("err"in e)try{const t=this._subscribers.get(e.subscriptionId);t?t.subscriber.error(e.err):this._log.warn(`received observable error for unregistered subscription  ${e.subscriptionId}`)}finally{this._subscribers.delete(e.subscriptionId)}else if("subErr"in e){const t=this._subscribeRelatedCalls.get(e.id);try{const n=this._subscribers.get(e.id);n?n.subscriber.error(e.subErr):this._log.warn(`received subscription error response for unregistered call ${e.id}`)}finally{t&&(t.reject(e.subErr),this._subscribeRelatedCalls.delete(e.id)),this._observables.delete(e.subscribableId),this._subscribers.delete(e.id)}}else if("ping"in e)try{this._observables.get(e.ping)?this._observableTransport.outbound({pong:e.ping}):this._log.warn(`received ping for unregistered observable ${e.ping}`)}finally{}}_handleCall(e,t){let n=O.create();for(;this._calls.has(n);)n=O.create();const r=g.createCompletionSource();this._calls.set(n,r);const i=t.map((e=>{return t=e,Boolean(t)&&t._tag===vr?e.toJSON():e;var t}));return this._transport.outbound({id:n,method:e,args:i,serverId:this._serverId}),r.promise}_createSubscribeHandler(e,t){let n=O.create();for(;this._subscribeRelatedCalls.has(n);)n=O.create();const r=g.createCompletionSource();return this._subscribeRelatedCalls.set(n,r),this._observableTransport.outbound({id:n,subscribableId:e,action:"subscribe"}),this._subscribers.set(n,{subscribableId:e,subscriber:t}),()=>{this._handleUnsubscribe(n,e)}}_handleUnsubscribe(e,t){let n=O.create();for(;this._subscribeRelatedCalls.has(n);)n=O.create();const r=g.createCompletionSource();return this._subscribeRelatedCalls.set(n,r),this._observableTransport.outbound({id:n,subscriptionId:e,subscribableId:t,action:"unsubscribe"}),this._subscribers.delete(e),r.promise}dispose(){for(const e of this._observables.keys())this._observableTransport.outbound({id:O.create(),subscribableId:e,action:"dispose"});this._observables.clear(),this._transportSubscription.unsubscribe(),this._observableTransportSubscription.unsubscribe(),this._calls.clear(),this._subscribeRelatedCalls.clear()}}class xr extends wr{constructor(e){super(new pr("cs-to-bg-rpc-1587687052565",e),new pr("cs-to-bg-observable-rpc-1587687052565",e))}}class Er extends tn{constructor(t){var n;super({browser:t.browser,extensionType:t.extensionType,context:"cs",historyLoggerExtraArgs:{downloadFileName:"grammarly-cs-logs.tsv",onDownload:()=>{var e;null===(e=this.bgRpc)||void 0===e||e.api.downloadBackgroundPageLogs()}}}),this.browserApi=t.browserApi,hn(t.browserApi.message),t.skipInitExtensionApi||(n=t.browserApi,self.extensionContentScriptApi&&rn.warn("Content Script Extension Api init called more than once"),self.extensionContentScriptApi=self.extensionContentScriptApi||n),this.bgRpc=new gr(e),this.csShareStorage=new fr,this.capiBgRpc=new xr(e)}static get isInited(){return void 0!==this._instance}static getInstance(){if(void 0===this._instance)throw new Error("Env not inited yet");return this._instance}static init(e){if(void 0!==this._instance)throw new Error("Env already inited");const t=new Er(e);return this._instance=t,tn.initShared(t),t.browserApi.message.start&&t.browserApi.message.start(),t}}const Sr=2147483642;var Ir;!function(e){function t(e,t){try{for(const n of Object.keys(t))if(t[n]&&t[n](e))return n;return null}catch(e){return null}}e.isSpecific={draftJs:e=>!(!e.hasAttribute("contenteditable")||!e.querySelector('[data-contents="true"] > [data-editor], [data-block]')),quill:e=>e.classList.contains("ql-editor")||e.classList.contains("ql-container"),redactor:e=>e.className.indexOf("redactor")>-1,prosemirror:e=>e.hasAttribute("pm-container")||e.classList.contains("ProseMirror"),scribe:e=>e.className.indexOf("scribe")>-1,trix:e=>e.className.indexOf("trix")>-1,"medium-editor":e=>e.className.indexOf("medium-editor")>-1,tinymce:e=>{if("IFRAME"!==e.tagName)return!1;const t=e;return t.id.indexOf("mce")>-1||!!(t.contentDocument&&t.contentDocument.querySelectorAll("#tinymce, .mce-content-body").length>0)},ckeditor4:e=>e.matches("iframe.cke_wysiwyg_frame")||e.classList.contains("cke_editable"),ckeditor5:e=>e.classList.contains("ck-editor__editable"),slate:e=>"true"===e.getAttribute("data-slate-editor"),mobiledoc:e=>e.classList.contains("__mobiledoc-editor")},e.isGeneric={contenteditable:e=>{const t=e.attributes.getNamedItem("contenteditable");return!(!function(e){return!(e instanceof HTMLSelectElement)}(e)||!t||"true"!==t.value&&""!==t.value&&"plaintext-only"!==t.value)},textarea:e=>"TEXTAREA"===e.tagName,iframe:t=>{if("IFRAME"===t.tagName){const n=t;return!!(n.contentDocument&&n.contentDocument.body&&e.isGeneric.contenteditable(n.contentDocument.body))}return!1},iframeHost:t=>{if("IFRAME"===t.tagName){const n=t;return!(n.contentDocument&&n.contentDocument.body&&e.isGeneric.contenteditable(n.contentDocument.body))}return!1}},e.get=function(n){return{generic:t(n,e.isGeneric),specific:t(n,e.isSpecific)}}}(Ir||(Ir={}));var Ar=1,Tr=function(){return Promise.resolve()}(),Or={};function Cr(e){return e in Or&&(delete Or[e],!0)}var kr,Rr=function(e){var t=Ar++;return Or[t]=!0,Tr.then((function(){return Cr(t)&&e()})),t},Fr=function(e){Cr(e)},Nr=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return ye(t,e),t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0?e.prototype.requestAsyncId.call(this,t,n,r):(t.actions.push(this),t.scheduled||(t.scheduled=Rr(t.flush.bind(t,null))))},t.prototype.recycleAsyncId=function(t,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,r);0===t.actions.length&&(Fr(n),t.scheduled=void 0)},t}(Tn),Pr=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ye(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,n=this.actions,r=-1,i=n.length;e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while(++r<i&&(e=n.shift()));if(this.active=!1,t){for(;++r<i&&(e=n.shift());)e.unsubscribe();throw t}},t}(Cn))(Nr);function Mr(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Number.POSITIVE_INFINITY,r=null,i=e[e.length-1];return Ct(i)?(r=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(n=e.pop())):"number"==typeof i&&(n=e.pop()),null===r&&1===e.length&&e[0]instanceof je?e[0]:sr(n)(Bt(e,r))}function Dr(e,t,n){return n?Dr(e,t).pipe(xn((function(e){return Ie(e)?n.apply(void 0,e):n(e)}))):new je((function(n){var r,i=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.next(1===e.length?e[0]:e)};try{r=e(i)}catch(e){return void n.error(e)}if(_e(t))return function(){return t(i,r)}}))}function jr(e){var t=e.error;e.subscriber.error(t)}kr||(kr={});var Ur=function(){function e(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}return e.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},e.prototype.do=function(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}},e.prototype.accept=function(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)},e.prototype.toObservable=function(){var e,t;switch(this.kind){case"N":return Xn(this.value);case"E":return e=this.error,new je(t?function(n){return t.schedule(jr,0,{error:e,subscriber:n})}:function(t){return t.error(e)});case"C":return jn()}throw new Error("unexpected notification kind value")},e.createNext=function(t){return void 0!==t?new e("N",t):e.undefinedValueNotification},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}();function Lr(e,t){return void 0===t&&(t=0),function(n){return n.lift(new Br(e,t))}}var Br=function(){function e(e,t){void 0===t&&(t=0),this.scheduler=e,this.delay=t}return e.prototype.call=function(e,t){return t.subscribe(new $r(e,this.scheduler,this.delay))},e}(),$r=function(e){function t(t,n,r){void 0===r&&(r=0);var i=e.call(this,t)||this;return i.scheduler=n,i.delay=r,i}return ye(t,e),t.dispatch=function(e){var t=e.notification,n=e.destination;t.observe(n),this.unsubscribe()},t.prototype.scheduleMessage=function(e){this.destination.add(this.scheduler.schedule(t.dispatch,this.delay,new Vr(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(Ur.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(Ur.createError(e)),this.unsubscribe()},t.prototype._complete=function(){this.scheduleMessage(Ur.createComplete()),this.unsubscribe()},t}(Re),Vr=function(){return function(e,t){this.notification=e,this.destination=t}}();function Wr(e,t){return rr(e,t,1)}const Gr=1e3,qr=6e4;function Hr(e){return e*qr}var zr;!function(e){const t=Gt.create("universal.cs.integration.observables"),n=e=>In(e,"focus",!0);function r(e){return e instanceof Element&&e.shadowRoot&&e.shadowRoot.activeElement?r(e.shadowRoot.activeElement):e}function i(e,t){return{document:e,frame:t}}e.createFocusObservable=function(e,o,s=n){return function(e,n){const r=i(e),o=Zn(e.getElementsByTagName("iframe")),s=n.pipe(Wr((e=>Array.from(e.addedNodes))),rt((e=>"IFRAME"===e.nodeName)));return cr(o,s).pipe(rt((n=>function(e,n){try{const t=e.src;if(t&&"about:blank"!==t&&!t.startsWith("javascript")){return new URL(t,n.baseURI).origin===n.location.origin}return!0}catch(e){return t.warn("Error converting iframe's src to url",e),!0}}(n,e))),rr((e=>{try{return function(e){const t=e.contentDocument;return t&&"complete"===t.readyState}(e)?Xn(e):Dr((t=>e.addEventListener("load",t,!0)),(t=>e.removeEventListener("load",t))).pipe(xn((()=>e)),Un(1))}catch(e){return t.warn("failed to receive iframes document",e),Xn(null)}})),xn((e=>{try{if(null!==e&&null!==e.contentDocument)return i(e.contentDocument,e)}catch(e){t.warn("failed to receive iframes document",e)}return null})),rt((e=>null!==e))).pipe(ur(r))}(e,o).pipe(rr((e=>function(e,t,n){const i=e.document,o=Fn(Gr),s=e.frame?Dn:(l=()=>Xn(i.activeElement).pipe(rt((e=>e&&i.defaultView&&i.defaultView.HTMLElement&&e instanceof i.defaultView.HTMLElement))),new je((function(e){var t;try{t=l()}catch(t){return void e.error(t)}return(t?Zn(t):jn()).subscribe(e)}))),a=t(i).pipe(xn((e=>e.target))),c=e.frame?Dn:Mr(o,n).pipe(rt((e=>!!i.defaultView&&"visible"===i.visibilityState&&!!i.activeElement)),xn((e=>i.activeElement)),lr()),u=Mr(c,a).pipe(rt((e=>i.defaultView&&i.defaultView.HTMLElement&&e instanceof i.defaultView.HTMLElement)),xn((e=>r(e))));var l;return cr(s,u).pipe(lr())}(e,s,o).pipe(xn((t=>({element:t,owner:e})))))),lr(),Lr(Pr))},e.docInfo=i}(zr||(zr={}));const Kr=e=>e.replace("www.","");function Jr(e){const t=e&&e.ownerDocument||document,n=t.location||t.defaultView.location;return n?Kr(n.hostname):""}var Yr,Xr;!function(e){function t(e,t){if(!e||!t)return!0;return!t.includes(e)}function n(e,t){var n;return Boolean((null==t?void 0:t.isDesktopIntegrationEnabled)&&(null===(n=e.llamaIntegration)||void 0===n?void 0:n.enabled))}function r(e,n,r,i){var o,s;const a=i?(c=i,te()&&/^about:/.test(c)?c:""===c?"":Kr(new URL(c).hostname)):void 0;var c;const u=e.isLlamaInstalled&&(null===(o=n.llamaIntegration)||void 0===o?void 0:o.enabled);return t(a,null===(s=n.llamaIntegration)||void 0===s?void 0:s.disabledByDomain)&&(u||e.showDesktopIntegrationExtensionToggle||(null==r?void 0:r.desktopIntegrationExtensionSupport))}e.isEnable=n,e.showSettingPopupToggle=r,e.showGrayGButton=function(e,t,i,o){return r(e,t,i,o)&&n(t,e)},e.isIntegrationEnable=function(e,r,i){var o;return!(!e||!i)&&(t(r,null===(o=i.llamaIntegration)||void 0===o?void 0:o.disabledByDomain)&&n(i,e))}}(Yr||(Yr={})),function(e){e.full="full",e.limited="limited"}(Xr||(Xr={}));const Qr="grammarly-desktop-integration";var Zr,ei;!function(e){class t{constructor(){this._integration=null}get integration(){if(this._integration)return this._integration;return Boolean(document.querySelector(Qr))?null:(this._integration=function(e=Qr){var t,n;const r=document.createElement("style");r.textContent="\n  div {\n    position: absolute;\n    width: 1px;\n    height: 1px;\n    padding: 0;\n    margin: -1px;\n    overflow: hidden;\n    clip: rect(0, 0, 0, 0);\n    white-space: nowrap;\n    border: 0;\n    -moz-user-select: none;\n    -webkit-user-select: none;\n    -ms-user-select:none;\n    user-select:none;\n  }\n\n  div:before {\n    content: attr(data-content);\n  }\n";const i=document.createElement("div");i.setAttribute("aria-label","grammarly-integration"),i.setAttribute("tabindex","-1");const o=document.createElement(e);return o.attachShadow({mode:"open"}),o.setAttribute("data-grammarly-shadow-root","true"),null===(t=o.shadowRoot)||void 0===t||t.appendChild(r),null===(n=o.shadowRoot)||void 0===n||n.appendChild(i),document.documentElement.appendChild(o),{activate:(e,t,n)=>{const r=JSON.stringify(t?{mode:t,isActive:e,isUserDisabled:n}:{isActive:e});null==i||i.setAttribute("data-content",r)},remove:()=>{var e;null===(e=null==o?void 0:o.parentNode)||void 0===e||e.removeChild(o)}}}(Qr),this._integration)}updateState(e,t,n,r){var i;this._isActive=!Yr.isIntegrationEnable(r,e,t),this._mode=Yr.isEnable(t,r)?Xr.limited:Xr.full,n?null===(i=this.integration)||void 0===i||i.activate(this._isActive,this._mode,!n):this.dispose()}dispose(){this._integration&&(this._integration.remove(),this._integration=null)}}e.init=function(){return new t}}(Zr||(Zr={})),function(e){function t(e,t){return n(e,t).pipe(nt(),Lr(Pr))}function n(e,t){return new je((n=>{const r=new MutationObserver((e=>n.next(e)));return r.observe(e,t),()=>r.disconnect()}))}e.create=t,e.createUnsafe=n,e.createFlattenHot=function(e,t){return n(e,t).pipe(Wr((e=>e)),nt())},e.observeAttribute=function(e,n){return t(e,{attributes:!0,attributeFilter:[n],subtree:!1,childList:!1}).pipe(xn((t=>e.getAttribute(n))))},e.observeStyle=function(e){return t(e,{attributes:!0,attributeFilter:["style"],subtree:!1,childList:!1}).pipe(xn((t=>e.style)))},e.observeChildList=function(e){return t(e,{attributes:!1,subtree:!1,childList:!0}).pipe(xn((t=>e.childNodes)))}}(ei||(ei={}));var ti=n(52961);const ni="data-enable-grammarly";const ri=["data-gramm_editor","data-gramm","data-gramm_id","gramm_editor","readonly","disabled"],ii=["pm-container",{name:"class",value:"ProseMirror"},"data-synchrony",{name:"data-gramm",value:"false"},{name:ni,value:"false"},{name:"aria-label",value:"Search Facebook"}],oi=["changed-user","changed-plan","changed-dialect","cleanup","editor-fix","llama-action"];function si(e,t){let n=e.parentNode;for(;null!==n;){if(ci(n,t))return n;n=n.parentNode}return!1}function ai(e){return"true"===e.contentEditable||"plaintext-only"===e.contentEditable}function ci(e,t){if(!e)return!1;const n=e.matches||e.msMatchesSelector||e.matchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector;return!!n&&n.apply(e,[t])}function ui(e,t=null,n){return this.addEventListener(e,t,n),{off:()=>li.apply(this,[e,t,n])}}function li(e,t,n){this.removeEventListener(e,t||null,n)}const di=Gt.create("lib.external");function hi(e){const t=document.createElement("script");t.innerHTML=e,document.head.appendChild(t),t.parentNode&&t.parentNode.removeChild(t)}function fi(){hi(`window.GR_EXTENSION_ID='${ee().appConfig.extensionId}'`),hi("\n    window.GR_EXTENSION_SEND = function(key, data) {\n      if (!key) throw new TypeError('cant be called without message')\n      var e = document.createEvent('CustomEvent')\n      e.initCustomEvent('external:' + key, true, true, data)\n      document.dispatchEvent(e)\n    }\n  ");const e=oi.map((e=>{const t=`external:${e}`;return ui.call(document,t,(({detail:e})=>{di.trace("external event",{event:t,detail:e}),_n(t,e)}))}));return{dispose:()=>{hi("\n        delete window.GR_EXTENSION_ID\n        delete window.GR_EXTENSION_SEND\n      "),e.forEach((e=>e.off()))}}}function pi(e,t){const n=e.anchorNode;if(!n)return!1;const r=ri.map((e=>Array.isArray(e)?`[${e[0]}="${e[1]}"]`:`[${e}]`)).join(","),i=t.activeElement,o=e.toString().trim(),s="TEXTAREA"!==n.tagName&&"INPUT"!==n.tagName,a=!i||"INPUT"!==i.tagName&&"TEXTAREA"!==i.tagName,c=!ai(n),u=!si(n,r)&&!ci(n,r),l=!si(n,"[contenteditable=true],[contenteditable=plaintext-only]")&&!function(e){let t=e.parentNode;for(;null!==t;){if(ai(t))return t;t=t.parentNode}return!1}(n);return!!(o&&s&&a&&c&&u&&l)}var gi=function(){function e(e,t){this.dueTime=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new mi(e,this.dueTime,this.scheduler))},e}(),mi=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.dueTime=n,i.scheduler=r,i.debouncedSubscription=null,i.lastValue=null,i.hasValue=!1,i}return ye(t,e),t.prototype._next=function(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(bi,this.dueTime,this))},t.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},t.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var e=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}},t.prototype.clearDebounce=function(){var e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)},t}(Re);function bi(e){e.debouncedNext()}function vi(e,t){return"function"==typeof t?function(n){return n.pipe(vi((function(n,r){return Zn(e(n,r)).pipe(xn((function(e,i){return t(n,e,r,i)})))})))}:function(t){return t.lift(new wi(e))}}var yi,_i,wi=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new xi(e,this.project))},e}(),xi=function(e){function t(t,n){var r=e.call(this,t)||this;return r.project=n,r.index=0,r}return ye(t,e),t.prototype._next=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(e){return void this.destination.error(e)}this._innerSub(t)},t.prototype._innerSub=function(e){var t=this.innerSubscription;t&&t.unsubscribe();var n=new er(this),r=this.destination;r.add(n),this.innerSubscription=nr(e,n),this.innerSubscription!==n&&r.add(this.innerSubscription)},t.prototype._complete=function(){var t=this.innerSubscription;t&&!t.closed||e.prototype._complete.call(this),this.unsubscribe()},t.prototype._unsubscribe=function(){this.innerSubscription=void 0},t.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&e.prototype._complete.call(this)},t.prototype.notifyNext=function(e){this.destination.next(e)},t}(tr);!function(e){e.anonymous="anonymous",e.registered="registered",e.premium="premium"}(yi||(yi={})),function(e){function t(e){var t;return["BUSINESS","NGO","GOV"].includes((null===(t=e.institutionInfo)||void 0===t?void 0:t.organizationType)||"")}function n(e){return!!e.institutionInfo}e.getType=function(e){return e.premium?yi.premium:e.anonymous?yi.anonymous:yi.registered},e.getUserRole=function(e,t){var n;return null===(n=e.roles)||void 0===n?void 0:n.find((e=>e.type===t))},e.isEdcBlocked=function(e){return!!e.edc&&!e.edc.compliant},e.hasRole=function(e){return!!e.customFields&&(void 0!==e.customFields.frontend_role&&""!==e.customFields.frontend_role)},e.hasSoundFluentGoals=function(e){return!!e.customFields&&(void 0!==e.customFields.frontend_soundFluent&&""!==e.customFields.frontend_soundFluent)},e.hasPrimaryLanguage=function(e){return!!e.customFields&&(void 0!==e.customFields.frontend_primaryLanguage&&""!==e.customFields.frontend_primaryLanguage)},e.isBusinessAdmin=function(e){var n;return Boolean(t(e)&&(null===(n=null==e?void 0:e.institutionInfo)||void 0===n?void 0:n.admin))},e.doesUserBelongToBusinessInstitution=t,e.doesUserBelongToInstitution=n,e.doesUserBelongToEDUInstitution=function(e){var t;return["EDU"].includes((null===(t=e.institutionInfo)||void 0===t?void 0:t.organizationType)||"")},e.doesUserBelongToWorkspace=function(e){var t;return(null===(t=e.roles)||void 0===t?void 0:t.map((e=>e.type)).includes("WORKSPACE"))||!1},e.isClaimed=function(e){return e.groups.includes("claimed-invitation")},e.isGrammarlyEmployee=function(e){return e.email.endsWith("@grammarly.com")},e.isConsumerUser=function(e){return!n(e)},e.defaultUser={anonymous:!0,groups:[],mimic:[],id:"",premium:!1,isTest:!1,settings:{},subscriptionFree:!1,type:"anonymous",email:"",registrationDate:(new Date).toString(),firstName:""}}(_i||(_i={}));var Ei=function(e){return"Left"===e._tag},Si=function(e){return{_tag:"Left",left:e}},Ii=function(e){return{_tag:"Right",right:e}};function Ai(e,t){const n=e.decode(t);if(Ei(n))throw new Error("Can't parse "+n.left.map((e=>e.message)).join("; "));return n.right}var Ti=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Oi=function(){return(Oi=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Ci=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r},ki=Si,Ri=function(e,t,n){return ki([{value:e,context:t,message:n}])},Fi=Ii,Ni=function(){function e(e,t,n,r){this.name=e,this.is=t,this.validate=n,this.encode=r,this.decode=this.decode.bind(this)}return e.prototype.pipe=function(t,n){var r=this;return void 0===n&&(n="pipe("+this.name+", "+t.name+")"),new e(n,t.is,(function(e,n){var i=r.validate(e,n);return Ei(i)?i:t.validate(i.right,n)}),this.encode===Pi&&t.encode===Pi?Pi:function(e){return r.encode(t.encode(e))})},e.prototype.asDecoder=function(){return this},e.prototype.asEncoder=function(){return this},e.prototype.decode=function(e){return this.validate(e,[{key:"",type:this,actual:e}])},e}(),Pi=function(e){return e};function Mi(e,t,n,r){for(var i=e.length,o=Array(i+1),s=0;s<i;s++)o[s]=e[s];return o[i]={key:t,type:n,actual:r},o}function Di(e,t){for(var n=t.length,r=0;r<n;r++)e.push(t[r])}var ji=Object.prototype.hasOwnProperty;function Ui(e){return Object.keys(e).map((function(t){return t+": "+e[t].name})).join(", ")}function Li(e){for(var t=0;t<e.length;t++)if(e[t].encode!==Pi)return!1;return!0}function Bi(e){return"{ "+Ui(e)+" }"}function $i(e){return"Partial<"+e+">"}function Vi(e){var t;if(Yi(e)){var n=e.value;if(ro.is(n))return(t={})[n]=null,t}else{if("KeyofType"===e._tag)return e.keys;if(Qi(e)){var r=e.types.map((function(e){return Vi(e)}));return r.some(no.is)?void 0:Object.assign.apply(Object,Ci([{}],r))}}}function Wi(e){return"("+e.map((function(e){return e.name})).join(" | ")+")"}function Gi(e,t){for(var n=!0,r=!0,i=!ao.is(e),o=0,s=t;o<s.length;o++){(l=s[o])!==e&&(n=!1),ao.is(l)&&(r=!1)}if(n)return e;if(r)return t[t.length-1];for(var a={},c=0,u=t;c<u.length;c++){var l=u[c];for(var d in l)a.hasOwnProperty(d)&&!i&&l[d]===e[d]||(a[d]=l[d])}return a}function qi(e){switch(e._tag){case"RefinementType":case"ReadonlyType":return qi(e.type);case"InterfaceType":case"StrictType":case"PartialType":return e.props;case"IntersectionType":return e.types.reduce((function(e,t){return Object.assign(e,qi(t))}),{})}}function Hi(e,t){for(var n=Object.getOwnPropertyNames(e),r=!1,i={},o=0;o<n.length;o++){var s=n[o];ji.call(t,s)?i[s]=e[s]:r=!0}return r?i:e}var zi={};function Ki(e,t){for(var n=[],r=0,i=e;r<i.length;r++){var o=i[r];-1!==t.indexOf(o)&&n.push(o)}return n}function Ji(e){return"AnyType"===e._tag}function Yi(e){return"LiteralType"===e._tag}function Xi(e){return"InterfaceType"===e._tag}function Qi(e){return"UnionType"===e._tag}var Zi=[];function eo(e){if(-1!==Zi.indexOf(e))return zi;if(Xi(e)||function(e){return"StrictType"===e._tag}(e)){var t=zi;for(var n in e.props){var r=e.props[n];Yi(r)&&(t===zi&&(t={}),t[n]=[r.value])}return t}if(function(e){return"ExactType"===e._tag}(e)||function(e){return"RefinementType"===e._tag}(e))return eo(e.type);if(function(e){return"IntersectionType"===e._tag}(e))return e.types.reduce((function(e,t){return function(e,t){if(e===zi)return t;if(t===zi)return e;var n=Object.assign({},e);for(var r in t)if(e.hasOwnProperty(r)){var i=Ki(e[r],t[r]);if(!(i.length>0)){n=zi;break}n[r]=i}else n[r]=t[r];return n}(e,eo(t))}),zi);if(Qi(e))return e.types.slice(1).reduce((function(e,t){return function(e,t){if(e===zi||t===zi)return zi;var n=zi;for(var r in e)t.hasOwnProperty(r)&&0===Ki(e[r],t[r]).length&&(n===zi&&(n={}),n[r]=e[r].concat(t[r]));return n}(e,eo(t))}),eo(e.types[0]));if(function(e){return"RecursiveType"===e._tag}(e)){Zi.push(e);var i=eo(e.type);return Zi.pop(),i}return zi}var to=new(function(e){function t(){var t=e.call(this,"null",(function(e){return null===e}),(function(e,n){return t.is(e)?Fi(e):Ri(e,n)}),Pi)||this;return t._tag="NullType",t}return Ti(t,e),t}(Ni)),no=new(function(e){function t(){var t=e.call(this,"undefined",(function(e){return void 0===e}),(function(e,n){return t.is(e)?Fi(e):Ri(e,n)}),Pi)||this;return t._tag="UndefinedType",t}return Ti(t,e),t}(Ni)),ro=(new(function(e){function t(){var t=e.call(this,"void",no.is,no.validate,Pi)||this;return t._tag="VoidType",t}return Ti(t,e),t}(Ni)),new(function(e){function t(){var t=e.call(this,"unknown",(function(e){return!0}),Fi,Pi)||this;return t._tag="UnknownType",t}return Ti(t,e),t}(Ni)),new(function(e){function t(){var t=e.call(this,"string",(function(e){return"string"==typeof e}),(function(e,n){return t.is(e)?Fi(e):Ri(e,n)}),Pi)||this;return t._tag="StringType",t}return Ti(t,e),t}(Ni))),io=new(function(e){function t(){var t=e.call(this,"number",(function(e){return"number"==typeof e}),(function(e,n){return t.is(e)?Fi(e):Ri(e,n)}),Pi)||this;return t._tag="NumberType",t}return Ti(t,e),t}(Ni)),oo=(new(function(e){function t(){var t=e.call(this,"bigint",(function(e){return"bigint"==typeof e}),(function(e,n){return t.is(e)?Fi(e):Ri(e,n)}),Pi)||this;return t._tag="BigIntType",t}return Ti(t,e),t}(Ni)),new(function(e){function t(){var t=e.call(this,"boolean",(function(e){return"boolean"==typeof e}),(function(e,n){return t.is(e)?Fi(e):Ri(e,n)}),Pi)||this;return t._tag="BooleanType",t}return Ti(t,e),t}(Ni))),so=new(function(e){function t(){var t=e.call(this,"UnknownArray",Array.isArray,(function(e,n){return t.is(e)?Fi(e):Ri(e,n)}),Pi)||this;return t._tag="AnyArrayType",t}return Ti(t,e),t}(Ni)),ao=new(function(e){function t(){var t=e.call(this,"UnknownRecord",(function(e){var t=Object.prototype.toString.call(e);return"[object Object]"===t||"[object Window]"===t}),(function(e,n){return t.is(e)?Fi(e):Ri(e,n)}),Pi)||this;return t._tag="AnyDictionaryType",t}return Ti(t,e),t}(Ni));!function(e){function t(t,n,r,i,o){var s=e.call(this,t,n,r,i)||this;return s.value=o,s._tag="LiteralType",s}Ti(t,e)}(Ni);!function(e){function t(t,n,r,i,o){var s=e.call(this,t,n,r,i)||this;return s.keys=o,s._tag="KeyofType",s}Ti(t,e)}(Ni);var co=function(e){function t(t,n,r,i,o,s){var a=e.call(this,t,n,r,i)||this;return a.type=o,a.predicate=s,a._tag="RefinementType",a}return Ti(t,e),t}(Ni);ko(io,(function(e){return Number.isInteger(e)}),"Int");var uo=function(e){function t(t,n,r,i,o){var s=e.call(this,t,n,r,i)||this;return s.runDefinition=o,s._tag="RecursiveType",s}return Ti(t,e),t}(Ni);Object.defineProperty(uo.prototype,"type",{get:function(){return this.runDefinition()},enumerable:!0,configurable:!0});var lo=function(e){function t(t,n,r,i,o){var s=e.call(this,t,n,r,i)||this;return s.type=o,s._tag="ArrayType",s}return Ti(t,e),t}(Ni);function ho(e,t){return void 0===t&&(t="Array<"+e.name+">"),new lo(t,(function(t){return so.is(t)&&t.every(e.is)}),(function(t,n){var r=so.validate(t,n);if(Ei(r))return r;for(var i=r.right,o=i.length,s=i,a=[],c=0;c<o;c++){var u=i[c],l=e.validate(u,Mi(n,String(c),e,u));if(Ei(l))Di(a,l.left);else{var d=l.right;d!==u&&(s===i&&(s=i.slice()),s[c]=d)}}return a.length>0?ki(a):Fi(s)}),e.encode===Pi?Pi:function(t){return t.map(e.encode)},e)}var fo=function(e){function t(t,n,r,i,o){var s=e.call(this,t,n,r,i)||this;return s.props=o,s._tag="InterfaceType",s}return Ti(t,e),t}(Ni);function po(e,t){void 0===t&&(t=Bi(e));var n=Object.keys(e),r=n.map((function(t){return e[t]})),i=n.length;return new fo(t,(function(e){if(ao.is(e)){for(var t=0;t<i;t++){var o=n[t],s=e[o];if(void 0===s&&!ji.call(e,o)||!r[t].is(s))return!1}return!0}return!1}),(function(e,t){var o=ao.validate(e,t);if(Ei(o))return o;for(var s=o.right,a=s,c=[],u=0;u<i;u++){var l=n[u],d=a[l],h=r[u],f=h.validate(d,Mi(t,l,h,d));if(Ei(f))Di(c,f.left);else{var p=f.right;(p!==d||void 0===p&&!ji.call(a,l))&&(a===s&&(a=Oi({},s)),a[l]=p)}}return c.length>0?ki(c):Fi(a)}),Li(r)?Pi:function(e){for(var t=Oi({},e),o=0;o<i;o++){var s=n[o],a=r[o].encode;a!==Pi&&(t[s]=a(e[s]))}return t},e)}var go=function(e){function t(t,n,r,i,o){var s=e.call(this,t,n,r,i)||this;return s.props=o,s._tag="PartialType",s}return Ti(t,e),t}(Ni);function mo(e,t){void 0===t&&(t=$i(Bi(e)));var n=Object.keys(e),r=n.map((function(t){return e[t]})),i=n.length;return new go(t,(function(t){if(ao.is(t)){for(var r=0;r<i;r++){var o=n[r],s=t[o];if(void 0!==s&&!e[o].is(s))return!1}return!0}return!1}),(function(t,r){var o=ao.validate(t,r);if(Ei(o))return o;for(var s=o.right,a=s,c=[],u=0;u<i;u++){var l=n[u],d=a[l],h=e[l],f=h.validate(d,Mi(r,l,h,d));if(Ei(f))void 0!==d&&Di(c,f.left);else{var p=f.right;p!==d&&(a===s&&(a=Oi({},s)),a[l]=p)}}return c.length>0?ki(c):Fi(a)}),Li(r)?Pi:function(e){for(var t=Oi({},e),o=0;o<i;o++){var s=n[o],a=e[s];void 0!==a&&(t[s]=r[o].encode(a))}return t},e)}var bo=function(e){function t(t,n,r,i,o,s){var a=e.call(this,t,n,r,i)||this;return a.domain=o,a.codomain=s,a._tag="DictionaryType",a}return Ti(t,e),t}(Ni);function vo(e,t,n){var r=Vi(e);return r?function(e,t,n,r){void 0===r&&(r="{ [K in "+t.name+"]: "+n.name+" }");var i=e.length;return new bo(r,(function(t){return ao.is(t)&&e.every((function(e){return n.is(t[e])}))}),(function(t,r){var o=ao.validate(t,r);if(Ei(o))return o;for(var s=o.right,a={},c=[],u=!1,l=0;l<i;l++){var d=e[l],h=s[d],f=n.validate(h,Mi(r,d,n,h));if(Ei(f))Di(c,f.left);else{var p=f.right;u=u||p!==h,a[d]=p}}return c.length>0?ki(c):Fi(u||Object.keys(s).length!==i?a:s)}),n.encode===Pi?Pi:function(t){for(var r={},o=0;o<i;o++){var s=e[o];r[s]=n.encode(t[s])}return r},t,n)}(Object.keys(r),e,t,n):function(e,t,n){return void 0===n&&(n="{ [K in "+e.name+"]: "+t.name+" }"),new bo(n,(function(n){return ao.is(n)?Object.keys(n).every((function(r){return e.is(r)&&t.is(n[r])})):Ji(t)&&Array.isArray(n)}),(function(n,r){if(ao.is(n)){for(var i={},o=[],s=Object.keys(n),a=s.length,c=!1,u=0;u<a;u++){var l=s[u],d=n[l],h=e.validate(l,Mi(r,l,e,l));if(Ei(h))Di(o,h.left);else{var f=h.right;c=c||f!==l,l=f;var p=t.validate(d,Mi(r,l,t,d));if(Ei(p))Di(o,p.left);else{var g=p.right;c=c||g!==d,i[l]=g}}}return o.length>0?ki(o):Fi(c?i:n)}return Ji(t)&&Array.isArray(n)?Fi(n):Ri(n,r)}),e.encode===Pi&&t.encode===Pi?Pi:function(n){for(var r={},i=Object.keys(n),o=i.length,s=0;s<o;s++){var a=i[s];r[String(e.encode(a))]=t.encode(n[a])}return r},e,t)}(e,t,n)}var yo=function(e){function t(t,n,r,i,o){var s=e.call(this,t,n,r,i)||this;return s.types=o,s._tag="UnionType",s}return Ti(t,e),t}(Ni);function _o(e,t){void 0===t&&(t=Wi(e));var n=function(e){var t=eo(e[0]),n=Object.keys(t),r=e.length,i=function(n){for(var i=t[n].slice(),o=[t[n]],s=1;s<r;s++){var a=eo(e[s])[n];if(void 0===a)return"continue-keys";if(a.some((function(e){return-1!==i.indexOf(e)})))return"continue-keys";i.push.apply(i,a),o.push(a)}return{value:[n,o]}};e:for(var o=0,s=n;o<s.length;o++){var a=i(s[o]);if("object"==typeof a)return a.value;switch(a){case"continue-keys":continue e}}}(e);if(void 0!==n&&e.length>0){var r=n[0],i=n[1],o=i.length,s=function(e){for(var t=0;t<o;t++)if(-1!==i[t].indexOf(e))return t};return new Co(t,(function(t){if(ao.is(t)){var n=s(t[r]);return void 0!==n&&e[n].is(t)}return!1}),(function(t,n){var i=ao.validate(t,n);if(Ei(i))return i;var o=i.right,a=s(o[r]);if(void 0===a)return Ri(t,n);var c=e[a];return c.validate(o,Mi(n,String(a),c,o))}),Li(e)?Pi:function(n){var i=s(n[r]);if(void 0===i)throw new Error("no codec found to encode value in union codec "+t);return e[i].encode(n)},e,r)}return new yo(t,(function(t){return e.some((function(e){return e.is(t)}))}),(function(t,n){for(var r=[],i=0;i<e.length;i++){var o=e[i],s=o.validate(t,Mi(n,String(i),o,t));if(!Ei(s))return Fi(s.right);Di(r,s.left)}return ki(r)}),Li(e)?Pi:function(n){for(var r=0,i=e;r<i.length;r++){var o=i[r];if(o.is(n))return o.encode(n)}throw new Error("no codec found to encode value in union type "+t)},e)}var wo=function(e){function t(t,n,r,i,o){var s=e.call(this,t,n,r,i)||this;return s.types=o,s._tag="IntersectionType",s}return Ti(t,e),t}(Ni);var xo=function(e){function t(t,n,r,i,o){var s=e.call(this,t,n,r,i)||this;return s.types=o,s._tag="TupleType",s}return Ti(t,e),t}(Ni);var Eo=function(e){function t(t,n,r,i,o){var s=e.call(this,t,n,r,i)||this;return s.type=o,s._tag="ReadonlyType",s}return Ti(t,e),t}(Ni);function So(e,t){return void 0===t&&(t="Readonly<"+e.name+">"),new Eo(t,e.is,e.validate,e.encode,e)}var Io=function(e){function t(t,n,r,i,o){var s=e.call(this,t,n,r,i)||this;return s.type=o,s._tag="ReadonlyArrayType",s}return Ti(t,e),t}(Ni);function Ao(e,t){void 0===t&&(t="ReadonlyArray<"+e.name+">");var n=ho(e);return new Io(t,n.is,n.validate,n.encode,e)}var To=function(e){function t(t,n,r,i,o){var s=e.call(this,t,n,r,i)||this;return s.type=o,s._tag="ExactType",s}return Ti(t,e),t}(Ni);function Oo(e,t){void 0===t&&(t=function(e){return Xi(e)?"{| "+Ui(e.props)+" |}":function(e){return"PartialType"===e._tag}(e)?$i("{| "+Ui(e.props)+" |}"):"Exact<"+e.name+">"}(e));var n=qi(e);return new To(t,e.is,(function(t,r){var i=ao.validate(t,r);if(Ei(i))return i;var o=e.validate(t,r);return Ei(o)?o:Ii(Hi(o.right,n))}),(function(t){return e.encode(Hi(t,n))}),e)}new(function(e){function t(){var t=e.call(this,"Function",(function(e){return"function"==typeof e}),(function(e,n){return t.is(e)?Fi(e):Ri(e,n)}),Pi)||this;return t._tag="FunctionType",t}return Ti(t,e),t}(Ni));var Co=function(e){function t(t,n,r,i,o,s){var a=e.call(this,t,n,r,i,o)||this;return a.tag=s,a}return Ti(t,e),t}(yo);new(function(e){function t(){var t=e.call(this,"never",(function(e){return!1}),(function(e,t){return Ri(e,t)}),(function(){throw new Error("cannot encode never")}))||this;return t._tag="NeverType",t}return Ti(t,e),t}(Ni)),new(function(e){function t(){var t=e.call(this,"any",(function(e){return!0}),Fi,Pi)||this;return t._tag="AnyType",t}return Ti(t,e),t}(Ni)),new(function(e){function t(){var t=e.call(this,"object",(function(e){return null!==e&&"object"==typeof e}),(function(e,n){return t.is(e)?Fi(e):Ri(e,n)}),Pi)||this;return t._tag="ObjectType",t}return Ti(t,e),t}(Ni));function ko(e,t,n){return void 0===n&&(n="("+e.name+" | "+function(e){return e.displayName||e.name||"<function"+e.length+">"}(t)+")"),new co(n,(function(n){return e.is(n)&&t(n)}),(function(n,r){var i=e.validate(n,r);if(Ei(i))return i;var o=i.right;return t(o)?Fi(o):Ri(o,r)}),e.encode,e,t)}ko(io,Number.isInteger,"Integer"),function(e){function t(t,n,r,i,o){var s=e.call(this,t,n,r,i)||this;return s.props=o,s._tag="StrictType",s}Ti(t,e)}(Ni);const Ro=new Ni("ISODate",(e=>e instanceof Date),((e,t)=>{if("string"==typeof e){const t=new Date(e);if(!isNaN(t.getTime()))return Fi(t)}return Ri(e,t)}),(e=>e.toISOString()));function Fo(e,t){const n=mo(e,t);return new go(null!=t?t:`partialAsUndefined(${n.name})`,n.is,((t,r)=>{if(!t||"object"!=typeof t)return n.validate(t,r);const i={...t};for(const t in e)t in i||(i[t]=void 0);return n.validate(i,r)}),n.encode,e)}function No(e){return _o([e,no])}function Po(e,t,n){return new Ni(null!=n?n:`withDefault(${e.name})`,e.is,((n,r)=>void 0===n?Fi(t):e.validate(n,r)),e.encode)}const Mo=mo({chrome:oo,edge:oo,firefox:oo,safari:oo},"SwitchByBrowser"),Do=So(mo({legacyStopWorkingDate:Ro}),"SafariAppExtensionMigrationDynamicConfig"),jo=So(Fo({enableByBrowser:Mo}),"GmailSendEmailPopupDynamicConfig"),Uo=po({domain:ro,matchSubdomains:oo,allowedOriginPatterns:_o([ho(ro),no]),disableByBrowser:No(Mo)},"IframeIntegrationDomainRule"),Lo=So(Oo(po({enableGeneric:Po(oo,!1),enableByDomain:Po(ho(Uo),[]),enableByBrowser:Po(Mo,{chrome:!0,edge:!0})})),"IframeIntegrationDynamicConfig"),Bo=So(Fo({enableByBrowser:Mo}),"DraggableGButtonDynamicConfig"),$o=So(Fo({disabled:oo,disabledInOutlook:oo,disabledInGmail:oo,bannedPhrases:ho(ho(_o([ro,to])))}),"AutocompleteDynamicConfig"),Vo=So(mo({disabled:oo,useHeatmapCanvas:oo,onboardingEnabled:oo}),"ReadersAttentionDynamicConfig"),Wo=So(po({enableByBrowser:No(Mo),enableForGB:No(oo),turnaroundTime:io}),"ProofitDynamicConfig"),Go=So(mo({enableByBrowser:Mo}),"ToneAIDynamicConfig"),qo=So(mo({enableByBrowser:Mo}),"EthicalAIDynamicConfig"),Ho=So(mo({enableByBrowser:Mo}),"SingleCardAssistantDynamicConfig"),zo=So(mo({enableByBrowser:Mo}),"SentenceLevelBrandTonesDynamicConfig"),Ko=So(Fo({disabled:oo,disabledByDomainPattern:ho(ro)}),"GapTransformCardDynamicConfig"),Jo=So(mo({enabled:oo,disabledByDomain:ho(ro)}),"LlamaIntegrationDynamicConfig"),Yo=So(Fo({disabled:oo,bannedDict:ho(ro),bannedCorrections:ho(function(e,t){void 0===t&&(t="["+e.map((function(e){return e.name})).join(", ")+"]");var n=e.length;return new xo(t,(function(t){return so.is(t)&&t.length===n&&e.every((function(e,n){return e.is(t[n])}))}),(function(t,r){var i=so.validate(t,r);if(Ei(i))return i;for(var o=i.right,s=o.length>n?o.slice(0,n):o,a=[],c=0;c<n;c++){var u=o[c],l=e[c],d=l.validate(u,Mi(r,String(c),l,u));if(Ei(d))Di(a,d.left);else{var h=d.right;h!==u&&(s===o&&(s=o.slice()),s[c]=h)}}return a.length>0?ki(a):Fi(s)}),Li(e)?Pi:function(t){return e.map((function(e,n){return e.encode(t[n])}))},e)}([ro,_o([ro,to])]))}),"AutocorrectDynamicConfig"),Xo=So(po({enableCanvas:oo,advanceMappingForTables:No(oo),advanceMappingForAll:No(oo),forceEmptyTextMapping:No(oo),highlightColors:ho(ro),underlineColors:ho(ro)}),"GDocsCanvasConfigDynamicConfig"),Qo=So(mo({disabled:oo,disableByBrowser:Mo,disableByDomain:Ao(ro)})),Zo=So(mo({activeItemRadius:So(mo({default:io,domainOverride:So(vo(ro,io))})),maxPrefetchRequestsWithinRadius:So(mo({default:io,domainOverride:So(vo(ro,io))}))})),es=So(mo({disabled:oo,disableByBrowser:Mo,disableByDomain:Ao(ro),prefetchOptions:Zo}),"ShortenItDynamicConfig"),ts=So(mo({disabled:oo,disableByBrowser:Mo,disableByDomain:Ao(ro)}),"AttentionScoreCardDynamicConfig"),ns=So(mo({disabled:oo,disableByBrowser:Mo,disableByDomain:Ao(ro)}),"ConsistencyCardDynamicConfig"),rs=So(mo({enabled:oo,excludeClassNames:Ao(ro),excludeSelectors:Ao(ro)}),"SlatejsDynamicConfig"),is=So(mo({triggerURLs:Ao(ro)}),"DraftAIUpsellDynamicConfig"),os=Oo(Fo({safariAppExtensionMigration:Do,newRichTextFieldsEnabled:oo,fluidDisabledForFirefox:oo,fluidDisabledForSafari:oo,autocomplete:$o,autocorrect:Yo,gmailSendEmailPopup:jo,fullSentenceRewritesDisabled:oo,overrideKey:Po(ro,"dynamicConfigOverrideKey"),iframeIntegration:Lo,showExtensionConflictPopup:oo,readersAttention:Vo,ungatingRenewalNotificationEnabled:oo,proofit:Wo,refreshExperimentsInterval:io,throttlePerformanceInterval:io,quillJSCatchAllDisabled:oo,toneAI:Go,draggableGButton:Bo,sentenceLevelBrandTones:zo,requireAuthCookieAccess:oo,gapTransformCard:Ko,llamaIntegration:Jo,highlightsBlendingEnabled:oo,gDocsCanvasConfig:Xo,shortenIt:es,attentionScoreCard:ts,confidentialModeEnabled:oo,consistencyCard:ns,slatejs:rs,dlpEnabled:oo,draftAIUpsell:is,ethicalAI:qo,singleCardAssistant:Ho,reader:Qo})),ss={safariAppExtensionMigration:"safariAppExtensionMigration_1558396627629",newRichTextFieldsEnabled:"newRichTextFieldsEnabled_1567530773088",fluidDisabledForFirefox:"fluidDisabledForFirefox_1567530773089",fluidDisabledForSafari:"fluidDisabledForSafari_1567530773090",autocorrect:"autocorrect_1579700246281",autocomplete:"autocomplete_1591162228085",gmailSendEmailPopup:"gmailSendEmailPopup_1588710046696",fullSentenceRewritesDisabled:"fullSentenceRewritesDisabled_1595353312714",iframeIntegration:"iframeIntegration_1593643390051",overrideKey:"overrideKeyName_1596156512364",showExtensionConflictPopup:"showExtensionConflictPopup_1597916739172",readersAttention:"readersAttention_1597884313725",ungatingRenewalNotificationEnabled:"ungatingRenewalNotificationEnabled_1599074790962",proofit:"proofit_1600711036876",refreshExperimentsInterval:"refreshExperimentsInterval_1601638971190",throttlePerformanceInterval:"throttlePerformanceInterval_1603889683416",quillJSCatchAllDisabled:"quillJSCatchAllDisabled_1606352678466",toneAI:"toneAI_1622644675216",draggableGButton:"draggableGButton_1610396074136",sentenceLevelBrandTones:"sentenceLevelBrandTones_1614289097065",requireAuthCookieAccess:"requireAuthCookieAccess_1614620202105",gapTransformCard:"gapTransformCard_1618874880869",llamaIntegration:"llamaIntegration_1620108441433",highlightsBlendingEnabled:"highlightsBlendingEnabled_1620339604804",gDocsCanvasConfig:"gDocsCanvasConfig_1621558551011",shortenIt:"shortenIt_1622820878915",attentionScoreCard:"attentionScoreCard_1627677830344",confidentialModeEnabled:"confidentialModeEnabled_1622017526624",consistencyCard:"consistencyCard_1623273583508",slatejs:"slatejs_1624453574243",dlpEnabled:"dlpEnabled_1623225997151",draftAIUpsell:"draftAIUpsell_1627424945372",ethicalAI:"ethicalAI_1627579461366",singleCardAssistant:"singleCardAssistant_1633644070595",reader:"reader_1641309787966"};So(function(e,t){void 0===t&&(t="("+e.map((function(e){return e.name})).join(" & ")+")");var n=e.length;return new wo(t,(function(t){return e.every((function(e){return e.is(t)}))}),0===e.length?Fi:function(t,r){for(var i=[],o=[],s=0;s<n;s++){var a=e[s],c=a.validate(t,Mi(r,String(s),a,t));Ei(c)?Di(o,c.left):i.push(c.right)}return o.length>0?ki(o):Fi(Gi(t,i))},0===e.length?Pi:function(t){return Gi(t,e.map((function(e){return e.encode(t)})))},e)}([function(e,t,n){const r={};for(const[e,n]of Object.entries(t))r[n]=e;return new Ni(null!=n?n:`mapped(${e.name})`,e.is,((t,n)=>{if(!t||"object"!=typeof t)return e.validate(t,n);const i={};for(const e in t)e in r?i[r[e]]=t[e]:i[e]=t[e];return e.validate(i,n)}),(n=>{const r=e.encode(n);if(!r)return r;const i={};for(const e in r)e in t?i[t[e]]=r[e]:i[e]=r[e];return i}))}(os,ss),Oo(po({version:ro}))]),"DynamicConfigData");function as(e,t){const n={};return Object.keys(t).forEach((r=>{e(r,t[r])&&(n[r]=t[r])})),n}function cs(e){return Object.entries(e)}const us=e=>e===Object(e)&&!Array.isArray(e);function ls(e,...t){if(!t.length||!us(e))return e;const n=e,r=t.length;for(let i=0;i<r;i+=1){const r=t[i];if(us(r))for(const t in r)if(r.hasOwnProperty(t)){const i=r[t],o=e[t];us(i)?(o&&us(o)||(n[t]={}),ls(n[t],i)):Array.isArray(o)&&Array.isArray(i)?n[t]=Array.from(new Set(o.concat(i))):n[t]=Array.isArray(i)?Array.from(i):i}}return e}const ds=(e,t)=>{const n={getAll:async()=>await r.getAll(),get:async e=>await r.get(e),view:()=>{throw new Error("not_implemented")},patch:async e=>await r.set(e),changes:(r=e.browserApi.preferences).changes};var r;const i=Vt(Zn(n.changes).pipe(ur(null),(s=200,void 0===a&&(a=kn),function(e){return e.lift(new gi(s,a))}),vi((()=>n.getAll()))),Zn(T(5,(o=2,Gr/o),(()=>e.bgRpc.api.getPageConfig(t,self.location.href))).catch((e=>null))).pipe(ur(null)),((e,n)=>{var r,i,o,s,a,c;const u=null!==(i=null===(r=e.extensionSettings)||void 0===r?void 0:r[t])&&void 0!==i?i:{},l=(null===(o=null==u?void 0:u.enabled)||void 0===o||o)&&(null===(s=null==n?void 0:n.enabled)||void 0===s||s);return{user:null!==(a=e.user)&&void 0!==a?a:_i.defaultUser,settings:e.extensionSettings,dynamicConfig:ls(e.dynamicConfig?{llamaIntegration:Ai(Jo,e.dynamicConfig[ss.llamaIntegration])}:{},null!==(c=e.dynamicConfigOverrideKey)&&void 0!==c?c:{}),enabled:l}}));var o,s,a;return{storeLite:n,viewStoreLite:i}};var hs=n(57238);const fs="grExtInstalled",ps="grExtDisabled";function gs(e){null===e&&"next"===document.body.dataset[ps]||(null===e?delete document.body.dataset[ps]:document.body.dataset[ps]=e)}class ms{constructor(e,t){this._csShareStorage=e,this._loadContentScript=t,this._pageEnable=!0,this._enabledDefs=!1,this._isAnonymous=!0,this._wasLoaded=!1,this._isDesktopIntegrationEnable=!1,this._mutations=ei.createFlattenHot(self.document,{childList:!0,subtree:!0}),this._textFieldsObservable=zr.createFocusObservable(self.document,this._mutations),this._subs=[this._textFieldsObservable.subscribe((e=>{const t=e.owner.frame||e.element,n=Ir.get(t);this._pageEnable&&(n.generic||n.specific)&&this.load()})),ms.clickObserver.subscribe((e=>{2===e.detail&&this._enabledDefs&&this._pageEnable&&!this._isAnonymous&&vs.isValid()&&(this._csShareStorage.set("extensionDictionaryEvent",e),this._subs.push(vs.animation()),this.load())}))]}load(){this._wasLoaded&&!this._isDesktopIntegrationEnable||(this._wasLoaded=!0,ys.callExecuteContentScript(),this.dispose(),this._loadContentScript())}dispose(){this._subs.forEach((e=>e.unsubscribe()))}updateState(e,t,n,r){this._isDesktopIntegrationEnable=r,!this._pageEnable&&t&&this.load(),this._isAnonymous=e,this._pageEnable=t,this._enabledDefs=n,gs(this._pageEnable?null:"forever")}}var bs,vs,ys;!function(e){e.clickObserver=In(self.document,"click",!0),e.start=async function(t,n=!0,r){ys.checkScriptInitStart();const i=Jr(),o=Er.init({...t,skipInitExtensionApi:n}),s=new e(o.csShareStorage,null!=r?r:o.bgRpc.api.loadContentScript),a=Zr.init(),c=bs.init(o.config,i),{viewStoreLite:u}=ds(o,i),l=u.subscribe((e=>{var t,n,r,o;const c=null===(t=e.settings)||void 0===t?void 0:t.common;s.updateState(null===(r=null===(n=e.user)||void 0===n?void 0:n.anonymous)||void 0===r||r,e.enabled,null!==(o=null==c?void 0:c.enabledDefs)&&void 0!==o&&o,Yr.isIntegrationEnable(c,i,e.dynamicConfig)),a.updateState(i,e.dynamicConfig,e.enabled,c)})),d=[s,c,a];fn("contentScript-disconnected",(()=>{l.unsubscribe(),o.csShareStorage.clean(),d.forEach((e=>e&&e.dispose()))})),fn("disable-on-tab",(()=>{a.dispose()})),ys.checkScriptInitEnd(o.bgRpc),(e=>{if(self.location.href.includes("grammarly.com/extension-success")){const t=document.getElementById("click-to-run");t&&(t.onclick=()=>{var t,n;confirm("Always allow Grammarly to run on every website")?(e.api.enableClickToRunOnAllWebsites(),null===(t=document.getElementById("click-to-run-success"))||void 0===t||t.click()):null===(n=document.getElementById("click-to-run-fail"))||void 0===n||n.click()})}})(o.bgRpc)}}(ms||(ms={})),function(e){function t(e){Fn(10).pipe(rt((()=>!!document.body)),Kn()).subscribe((()=>{document.body.dataset.newGrCSCheckLoaded=e.buildInfo.version,document.body.dataset[fs]=""}))}e.init=function(e,n){const r=[];return t(e),self.location.protocol===e.appConfig.url.grammarlyProtocol&&n.match(`^([a-z\\-0-9]+\\.)*${e.appConfig.url.grammarlyDomain}$`)&&r.push(fi()),{dispose:()=>{r.forEach((e=>e.dispose()))}}}}(bs||(bs={})),function(e){const t="important";function n(e){return e+"px"}e.isValid=function(){const e=self.document.getSelection();return!(!e||e.toString().match(/[0-9_±!@#$%^&*:"|<>?~().,:}{’='-/ /]/))&&pi(e,self.document)},e.animation=function(){const e=document.createElement("div"),r=e.attachShadow({mode:"open"}),i=document.createElement("style");i.innerHTML=hs.__css,r.appendChild(i);const o=self.document.getSelection().getRangeAt(0).getBoundingClientRect(),s=document.createElement("div");s.style.setProperty("top",n(o.top),t),s.style.setProperty("left",n(o.left),t),s.style.setProperty("height",n(o.height),t),s.style.setProperty("max-width",n(o.width),t),s.style.setProperty("z-index",Sr.toString(),t),s.classList.add(hs.animatedUnderline,hs.checkAnimatedUnderline),r.appendChild(s),document.body.appendChild(e);const a=Fn(10),c=Vt(ms.clickObserver.pipe(Kn(),(u=!1,function(e){return e.lift(new Jn(u))}),ur(!0),lr()),a.pipe(xn((()=>{const e="."+ti.completeAnimation;if(document.querySelector(e))return!0;const t=Array.from(document.querySelectorAll("grammarly-extension"));for(const n of t)if(n.shadowRoot&&n.shadowRoot.querySelector(e))return!0;return!1})),ur(!1),lr())).pipe(rt((([e,t])=>!e||t)),lr()).subscribe(l);var u;return{unsubscribe:l};function l(){c.unsubscribe(),e.remove()}}}(vs||(vs={})),function(e){const t=Date.now(),n=e=>self.performance.mark("@grammarly-extension:"+e);e.callExecuteContentScript=()=>n("callExecuteContentScript"),e.checkScriptInitEnd=e=>{const r=Math.random()<.01;if(n("checkScriptInitEnd"),e.api.feMetricsLogRate("checkScriptInitialized"),r){const e=Date.now();_n("tracking-call",{msg:"tracking/RPC",data:["sendFelogEvent",{ex_csInitPerf:{domain:self.location.host,initTime:e-t,pageLoadTime:e-self.performance.timing.responseEnd},hideUserInfo:!0,level:"INFO",logger:"checkScript.initialized"}]})}},e.checkScriptInitStart=()=>n("checkScriptInitStart")}(ys||(ys={}));const _s="%appName%",ws={extensionSettingsToolbar:"%appName%SettingsToolbar",gdocsSidebarCardList:"%appName%GDocsSidebarAssistantList",assistantCardList:"%appName%AssistantList",extensionSettingsAssistant:"%appName%AssistantSettings",gdocsGoals:"%appName%AssistantGoals",extensionBusinessUphookPopup:"gb%appName%UphookPopup",gbExtensionSettingsToolbar:"gb%appName%SettingsToolbar",gbExtensionSettingsAssistant:"gb%appName%AssistantSettings",gdocsSidebarSuccessView:"%appName%GDocsSidebarAssistantSuccessView",extensionGButton:"%appName%GButton"};function xs(e,t){return{key:e,value:t}}function Es(e){return ws[e]?ws[e].replace(_s,((e,t)=>{const n=F.getAppName(ie(),ee().bundleInfo.extensionType);return 0===t?n:(r=n).charAt(0).toUpperCase()+r.slice(1);var r})):e}function Ss(e,t){return xs(e,t)}function Is(e){return e.map((e=>[e.key,e.value].map(encodeURIComponent).join("="))).join("&")}function As(e,t){if(0===t.length)return e;const n=e.includes("?");return[e,Is(t)].join(n?"&":"?")}function Ts(e){const t=[];return void 0!==e.medium&&t.push(Ss("utm_medium",e.medium)),void 0!==e.source&&t.push(Ss("utm_source",e.source)),void 0!==e.campaign&&t.push(Ss("utm_campaign",Es(e.campaign))),e.clickToRun&&t.push(Ss("click_to_run","true")),t}function Os(e){return Ts(e)}xs("fromExtension",""+!0);Ts({medium:"internal"})[0];function Cs(e){const t=e.reduce(((e,t)=>{const n=e.get(t.category),r=t.group;return n?n.count++:e.set(t.category,{group:r,categoryHuman:t.categoryHuman,count:1}),e}),new Map);return Array.from(t.values()).sort(((e,t)=>t.count-e.count))}function ks(e){const t=new Map;for(const{isFree:n,cardLayout:{group:r}}of e){t.has(r)||t.set(r,{lensName:r,free:0,premium:0});const e=t.get(r);e&&(e[n?"free":"premium"]+=1)}return Array.from(t.values()).sort(((e,t)=>t.premium-e.premium))}function Rs(e){return btoa(JSON.stringify(e))}const Fs="docs.google.com";function Ns(e,t){return(n,r)=>{return"extensionSettings"===n&&((i=r)&&"object"==typeof i&&"common"in i)?function(e,t,n){const r=e[Fs];if(!1!==(null==r?void 0:r.enabled)||(null==r?void 0:r.forcedEnabledDate_1639893688790))return n(),e;{const{disabledDate:n,...i}=r;return t(n),{...e,[Fs]:{...i,enabled:!0,forcedEnabledDate_1639893688790:Date.now()}}}}(r,e,t):r;var i}}class Ps extends class{constructor(){this._log=Gt.create("extension-api.alarms.stub"),this._warning="Method is not implemented"}create(e,t){return this._log.warn(this._warning),{dispose:E}}}{create(e,t){let n=null;const r=setTimeout((()=>{t.period&&(n=setInterval(e,t.period)),e()}),t.delay);return{dispose:()=>{clearTimeout(r),null!==n&&clearInterval(n)}}}}function Ms(e,t){chrome.runtime.lastError?t(chrome.runtime.lastError):e()}class Ds{constructor(){this._log=Gt.create("extension-api.managed-storage.validator")}validate(e,t){switch(e){case"GrammarlyEnrollmentToken":return"string"==typeof t&&t.length>0&&/^[a-z0-9_-]+$/i.test(t);case"GrammarlyBlockedClients":case"GrammarlyBlockedDomains":return"string"==typeof t;case"GrammarlyConfidentialModeEnabled":case"GrammarlyDlpEnabled":return"boolean"==typeof t;case"GrammarlyExtensionMode":return"string"==typeof t&&("limited"===t||"full"===t);default:return this._log.warn(`Unknown key: ${e}`),!1}}}class js{constructor(){this._log=Gt.create("extension-api.managed-storage.chrome"),this._validator=new Ds}get(e){return new Promise((t=>{chrome.storage.managed.get(e,(n=>{Ms((()=>{const r=n[e];void 0===r||this._validator.validate(e,r)?t(r):(this._log.warn(`Invalid value for "${e}": ${JSON.stringify(n[e])}`),t(void 0))}),(n=>{this._log.error(`Could not get "${e}"`,n),t(void 0)}))}))}))}}const Us="bridge",Ls="message:to-priv",Bs="message:to-non-priv";var $s;!function(e){e[e.success=0]="success",e[e.successWithEmpty=1]="successWithEmpty",e[e.alreadyMigrated=2]="alreadyMigrated"}($s||($s={}));const Vs=Gt.create("extension-api.message"),Ws=()=>{};class Gs{constructor(){this._listeners={},this._queue={},this.fire=(e,t,n=Ws,r)=>{const i=this._listeners[e]||[];i.length?i.forEach((e=>e(t,n,r))):(this._queue[e]=this._queue[e]||[],this._queue[e].push({content:t,callback:n,sender:r}))},this.unlisten=(e,t)=>{const n=this._listeners[e]||[],r=n.indexOf(t);-1!==r&&(1===n.length?delete this._listeners[e]:n.splice(r,1))},this.listenOnce=(e,t)=>{const n=(r,i,o)=>{this.unlisten(e,n),t&&t(r,i,o)};this.listen(e,n)},this.listen=(e,t)=>{this._listeners[e]=this._listeners[e]||[],-1===this._listeners[e].indexOf(t)&&this._listeners[e].push(t);const n=this._queue[e]||[];if(n.length){for(const e of n)try{t(e.content,e.callback,e.sender)}catch(e){Vs.error("exception during proccesing buffered messages",e)}delete this._queue[e]}}}}const qs=Gt.create("extension-api.message.bg"),Hs="popup";function zs(e){const{browser:t,extensionType:n}=ee().bundleInfo;if(!e)return"safariIOSWebExtension"===n||"safariWebExtension"===n;const r="firefox"===t?/^moz-extension:\/\/.*\/src\/popup.html$/:"safariWebExtension"===n||"safariIOSWebExtension"===n?/^safari-web-extension:\/\/.*\/src\/popup.html$/:"chrome"===t||"edge"===t?chrome&&chrome.runtime&&chrome.runtime.id?new RegExp(chrome.runtime.id+"/src/popup.html"):void 0:_(t);return void 0!==r&&r.test(e)}class Ks{constructor(e,t,n){this._getActiveTab=t,this._getAllTabs=n,this.kind="background-message-api",this.topFrameId="0",this._callbacks={},this._tabPorts={popup:[]},this._messageHelper=new Gs,this._sendMessageToPorts=(e,t)=>{const n=this._tabPorts[e];n&&n.forEach((e=>e.postMessage(t)))},this.toFocused=(e,t)=>this._getActiveTab().then((({id:n,url:r}={})=>{if(n)return zs(r)?qs.warn(`toFocussed not allowed for popup when it open like regular tab ${e}`,t):void this._sendMessageToPorts(n.toString(),{type:e,content:t,callid:i()})})),this.broadcast=(e,t)=>{if(!t)return;const n=({id:n,url:r})=>{n&&r&&-1===r.indexOf("chrome-extension:")&&this._sendMessageToPorts(n.toString(),{type:e,callid:i(),content:t})};this._getAllTabs().then((e=>e.forEach(n))),this._tabPorts.popup&&this._tabPorts.popup.length&&this._getActiveTab().then((({url:e}={})=>{n({id:Hs,url:e})}))},this._initPortListener=e=>{if(e.name===Us)e.onMessage((e=>{"message.toFocussed"===e.method&&this.toFocused(e.params&&e.params.type,e.params&&e.params.content)}));else if(e.name===Bs)e.onMessage((e=>this.broadcast(e.type,e.content)));else if(e.name===Ls){const{sender:t}=e;if(t){if(t.tab){const{id:n,url:r}=t.tab;if(n){let t=this._tabPorts[n];void 0===t&&(t=this._tabPorts[n]=[]),t.push(e)}r&&0===r.indexOf("http")&&this._messageHelper.fire("tab-connected",{tab:n,url:r}),e.onDisconnect((()=>{if(!n)return;const t=this._tabPorts[n];t&&t.splice(t.indexOf(e),1)}))}if(zs(t.url?t.url:t.tab?t.tab.url:"")){const t=Hs;this._tabPorts[t]=this._tabPorts[t]||[],this._tabPorts[t].push(e),e.onDisconnect((()=>{const n=this._tabPorts[t];n.splice(n.indexOf(e),1)}))}}e.onMessage((n=>{const r=({callid:n,content:r,type:i})=>{this._callbacks[n]&&(this._callbacks[n](r),delete this._callbacks[n]);this._messageHelper.fire(i,r,(t=>e.postMessage({content:t,callid:n})),t&&t.tab?{tabId:String(t.tab.id),frameId:void 0===t.frameId?void 0:String(t.frameId)}:{tabId:Hs})};"tab-connected"===n.type?this._getActiveTab().then((({url:e}={})=>{n.content={tab:Hs,url:e},r(n)})):r(n)}))}},e(this._initPortListener)}getPortExists(e){return!!this._tabPorts[e]}sendTo(e,t,n,r,o,s){var a;const{tabId:c,frameId:u=null}="object"==typeof e?e:{tabId:String(e)},l=null===(a=this._tabPorts[c])||void 0===a?void 0:a.filter((e=>null===u||void 0!==e.sender.frameId&&String(e.sender.frameId)===u));if(!l||!l.length)return void(o&&o({message:"no ports on specified destination"}));const d=s?l.filter((e=>s(e.sender&&e.sender.url))):l;if(!d.length)return void(o&&o({message:"no ports on specified tabFilter"}));const h={type:t,content:n};r&&"function"==typeof r&&(h.callid=i(),this._callbacks[h.callid]=r),d.forEach((e=>e.postMessage(h)))}listen(e,t){this._messageHelper.listen(e,t)}}const Js=Gt.create("Messaging.extension-api.content");class Ys{constructor(e){this.kind="content-script-message-api",this._callbacks={},this._messageHelper=new Gs,this._disconnected=!1,this.broadcastBackground=(...e)=>this._emit(this.backgroundPort,"bg").apply(null,e),this.broadcast=(...e)=>this._emit(this.broadcastPort,"tabs").apply(null,e),this._onPortMessage=e=>{Js.trace("portMessage",e)},this._emit=(e,t)=>(n,r,o,s)=>{const a=i();o&&"function"==typeof o&&(this._callbacks[a]=o);try{if(!e)throw new Error("lost connection to "+t+" port");e.postMessage({type:n,callid:a,content:r})}catch(e){if(!s)throw e;s(e)}},this._onBgPortMessage=({callid:e,content:t,type:n})=>{this._callbacks[e]?(this._callbacks[e](t),delete this._callbacks[e]):this._messageHelper.fire(n,t,(t=>{if(!this.backgroundPort)throw new Error("fail reply to bg page - connection lost");this.backgroundPort.postMessage({content:t,callid:e})}))},this._portInit=e,this.initPorts()}initPorts(){const e=this._portInit;this.port=e(Us),this.port.onMessage(this._onPortMessage),this.port.onDisconnect((()=>{this.port=null,this._onDisconnect()})),this.backgroundPort=e(Ls),this.backgroundPort.onMessage(this._onBgPortMessage),this.backgroundPort.onDisconnect((()=>{this.backgroundPort=null,this._onDisconnect()})),this.broadcastPort=e(Bs),this.broadcastPort.onDisconnect((()=>{this.broadcastPort=null,this._onDisconnect()}))}onBackgroundPortReconnect(e){this.backgroundPort&&this.backgroundPort.onReconnect&&this.backgroundPort.onReconnect(e)}listen(e,t){this._messageHelper.listen(e,t)}toFocused(e,t){return g.create((n=>{if(!this.port)throw new Error("lost connection to bg page");this.port.postMessage({method:"message.toFocussed",params:{type:e,content:t}}),n()}))}_onDisconnect(){this._disconnected||(this._disconnected=!0,Js.trace("Content script messaging went disconnected."),this._messageHelper.fire("contentScript-disconnected",null))}}const Xs=()=>({get:e=>g.create(((t,n)=>chrome.storage.local.get(e,(e=>{Ms((()=>t(e)),n)})))),set:e=>g.create(((t,n)=>chrome.storage.local.set(e,(()=>{Ms(t,n)})))),getAll:()=>g.create(((e,t)=>chrome.storage.local.get(null,(n=>{Ms((()=>e(n)),t)})))),remove:e=>g.create(((t,n)=>chrome.storage.local.remove(e,(()=>{Ms(t,n)})))),removeAll:()=>g.create(((e,t)=>chrome.storage.local.clear((()=>{Ms(e,t)}))))});class Qs{constructor(e){this._manifestVersion=e,this.kind="web-extension",this.executeScript=(e,t,n)=>g.create(((r,i)=>{"3"!==this._manifestVersion?chrome.tabs.executeScript(t,{file:e,matchAboutBlank:!0,...n?{frameId:Number(n)}:{}},(e=>Zs(null==e?void 0:e[0],r,i))):chrome.scripting.executeScript({files:[e],target:{tabId:t,...n?{frameIds:[Number(n)]}:{}}},(e=>{var t;return Zs(null===(t=null==e?void 0:e[0])||void 0===t?void 0:t.result,r,i)}))})),this.executeFunction=(e,t,n)=>g.create(((r,i)=>{"3"!==this._manifestVersion?chrome.tabs.executeScript(t,{code:`(${e.toString()})()`,matchAboutBlank:!0,...n?{frameId:Number(n)}:{}},(e=>Zs(null==e?void 0:e[0],r,i))):chrome.scripting.executeScript({func:e,target:{tabId:t,...n?{frameIds:[Number(n)]}:{}}},(e=>{var t;return Zs(null===(t=null==e?void 0:e[0])||void 0===t?void 0:t.result,r,i)}))})),this.insertCSS=(e,t,n,r)=>g.create(((i,o)=>{"3"!==this._manifestVersion?chrome.tabs.insertCSS(e,{file:t,code:n,matchAboutBlank:!0,...r?{frameId:Number(r)}:{}},(()=>Zs(void 0,i,o))):chrome.scripting.insertCSS({target:{tabId:e,...r?{frameIds:[Number(r)]}:{}},files:t?[t]:void 0,css:n},(()=>Zs(void 0,i,o)))}))}open(e,t){return g.create(((n,r)=>{chrome.tabs.create({url:e,active:t},(e=>{Ms((()=>n(e)),r)}))}))}updateCurrent(e){return g.create(((t,n)=>{chrome.tabs.update({url:e},(e=>{Ms((()=>t(e)),n)}))}))}getActiveTab(){return g.create(((e,t)=>{const n=chrome.tabs;n.query({active:!0,lastFocusedWindow:!0},(r=>{Ms((()=>{r&&r.length?e(r[0]):n.query({active:!0},(n=>{Ms((()=>{e(n[0])}),t)}))}),t)}))}))}getAllTabs(){return g.create(((e,t)=>chrome.tabs.query({},(n=>Ms((()=>e(n)),t)))))}getActiveTabUrl(){return g.create(((e,t)=>this.getActiveTab().then((n=>Ms((()=>e(n&&n.url)),t)))))}onActiveTabChange(e,t){const n=n=>{Ms((()=>{n&&e(n)}),(n=>{t(n),"Tabs cannot be edited right now (user may be dragging a tab)."===(null==n?void 0:n.message)&&setTimeout((()=>{this.getActiveTab().then((n=>{n&&Ms((()=>e(n)),t)}))}),100)}))};chrome.tabs.onActivated.addListener((e=>chrome.tabs.get(e.tabId,(e=>n(e))))),chrome.tabs.onUpdated.addListener(((e,t)=>{this.getActiveTab().then((r=>{r&&r.id===e&&(t.url||t.favIconUrl||"complete"===t.status)&&chrome.tabs.get(e,(e=>n(e)))}))})),chrome.windows.onFocusChanged.addListener((e=>chrome.tabs.query({active:!0,windowId:e,lastFocusedWindow:!0},(e=>n(e[0]))))),this.getActiveTab().then((e=>n(e)))}tabUrlChange(){return new je((e=>{const t=(t,n,r)=>{"complete"===n.status&&e.next({id:t,url:r.url})};return chrome.tabs.onUpdated.addListener(t),()=>chrome.tabs.onUpdated.removeListener(t)}))}reload(e){return g.create(((t,n)=>{const r=()=>Ms((()=>t()),n);e.id?chrome.tabs.reload(e.id,{},r):chrome.tabs.reload(r)}))}focusTab(e){return g.create(((t,n)=>{chrome.tabs.update(e,{highlighted:!0},(()=>{Ms((()=>t()),n)}))}))}}function Zs(e,n,r){t()?r(t()):n(e)}var ea,ta,na=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){return t.subscribe(new ra(e,this.notifier))},e}(),ra=function(e){function t(t,n){var r=e.call(this,t)||this;r.hasValue=!1;var i=new er(r);r.add(i),r.innerSubscription=i;var o=nr(n,i);return o!==i&&(r.add(o),r.innerSubscription=o),r}return ye(t,e),t.prototype._next=function(t){this.hasValue&&e.prototype._next.call(this,t)},t.prototype.notifyNext=function(){this.hasValue=!0,this.innerSubscription&&this.innerSubscription.unsubscribe()},t.prototype.notifyComplete=function(){},t}(tr);!function(e){e[e.nonEmptyMigration=0]="nonEmptyMigration",e[e.emptyMigration=1]="emptyMigration"}(ea||(ea={}));class ia{constructor(e,t,n,r=[],i=((e,t,n)=>t)){this._name=e,this._source=t,this._destination=n,this._destValuesToKeep=r,this._valuesMapper=i,this._migrationFlagSuccessfulValue="ok",this._migrationFlagKey=`__migration-${ia.migrationFlagUniqueKey}:(${this._name})`,this._migrationInProgress=!1,this.migrationAwareDestination=function(e,t){const{get:n,set:r,getAll:i,remove:o}=me(e);return{get:n,set:r,getAll:i,remove:o,async removeAll(){const n=await e.getAll();await e.removeAll(),await e.set(as(t,n))},changes:e.changes}}(this._destination,(e=>e===this._migrationFlagKey))}async _getMigrated(){return(await this._destination.get(this._migrationFlagKey))[this._migrationFlagKey]===this._migrationFlagSuccessfulValue}async _setMigrated(){await this._destination.set({[this._migrationFlagKey]:this._migrationFlagSuccessfulValue});const e=await this._destination.get(this._migrationFlagKey);if(e[this._migrationFlagKey]!==this._migrationFlagSuccessfulValue)throw new Error(`Could not verify status write, actual value: ${e}`)}async _runMigration(){k(!this._migrationInProgress,"migration already in progress"),this._migrationInProgress=!0;try{const e=await this._source.getAll(),t=as(((e,t)=>void 0!==t),function(e,t){const n={};return Object.keys(t).forEach((r=>n[r]=e(r,t[r]))),n}(((t,n)=>this._valuesMapper(t,n,e)),e)),n=0===Object.keys(t).length,r=await this._destination.get(this._destValuesToKeep),i={...t,...r};if(await this._destination.removeAll(),await this._destination.set(i),!b(i,await this._destination.getAll()))throw new Error("Could not verify write");return this._migrationInProgress=!1,n?ea.emptyMigration:ea.nonEmptyMigration}catch(e){throw this._migrationInProgress=!1,e}}async ensureMigrationCompleted(){if(await this._getMigrated())return $s.alreadyMigrated;{const e=await this._runMigration();switch(await this._setMigrated(),e){case ea.nonEmptyMigration:return $s.success;case ea.emptyMigration:return $s.successWithEmpty;default:throw new Error(`Match not exhaustive: ${e}`)}}}}ia.migrationFlagUniqueKey="104ccd8c-9919-9ae4-931f-782fb197486c",function(e){e.MigrationAwarePreferencesApiImpl=class{constructor(e,t,n,r=[],i){var o;this._source=t,this._migrationCompleted=g.createCompletionSource(),this._ensureMigrationCompletedCalled=!1,this.get=this._getMigrationAwareMethod("get"),this.set=this._getMigrationAwareMethod("set"),this.getAll=this._getMigrationAwareMethod("getAll"),this.remove=this._getMigrationAwareMethod("remove"),this.removeAll=this._getMigrationAwareMethod("removeAll"),this._migration=new ia(e,t,n,r,i),this.changes=Zn(n.changes).pipe((o=Zn(this._migrationCompleted.promise),function(e){return e.lift(new na(o))}))}ensureMigrationCompleted(){return this._ensureMigrationCompletedCalled=!0,this._migration.ensureMigrationCompleted().then((e=>(this._migrationCompleted.resolve(!0),Promise.resolve(e))),(e=>(this._migrationCompleted.resolve(!1),Promise.reject(e))))}_getMigrationAwareMethod(e){return(...t)=>(k(!0===this._ensureMigrationCompletedCalled,"supposed to run data migration before accessing prefs with web-extensions API"),this._migrationCompleted.promise.then((n=>(n?this._migration.migrationAwareDestination:this._source)[e](...t))))}},e.mapValueFromString=e=>{if("undefined"!==e)try{return e&&JSON.parse(e)}catch(t){return null!=e?e:void 0}},e.mapValueToString=e=>void 0===e?"undefined":JSON.stringify(e)}(ta||(ta={}));const oa={stats:"ex_perfstats",csInit:"ex_csInitPerf",viewInjection:"ex_viewInjectionPerf"};function sa(e){const{_tag:t,...n}=e;return{[oa[e._tag]]:n}}var aa;function ca(e,t){return{...e,application:t.application,version:t.version,env:t.env,sessionId:t.context&&t.sessionId,userId:t.context&&t.context.userId,containerId:t.context&&t.context.containerId}}!function(e){e.INFO="INFO",e.WARN="WARN",e.ERROR="ERROR"}(aa||(aa={}));const ua=(e,t)=>{if(0===e.length)return 0;const n=[...e].sort(((e,t)=>e-t));if(t<=0)return n[0];if(t>=1)return n[n.length-1];const r=(n.length-1)*(100*t)/100,i=Math.floor(r),o=i+1,s=r%1;return n[i]*(1-s)+n[o]*s},la=e=>e.reduce(((e,t,n)=>e+(t-e)/(n+1)),0),da=(e,t)=>{const n=void 0===t?la(e):t;return e.length>1?Math.sqrt(e.reduce(((e,t)=>e+(t-n)**2),0)/(e.length-1)):0};var ha,fa,pa;function ga(e){return ba.includes(e)}function ma(e){return ba.getTopSiteId(e)}!function(e){function t(){return{dummy:!0,startMeasure:()=>({endMeasure:()=>{},cancelMeasure:E}),measure:e=>e(),measureAsync:e=>e(),custom:E}}e.dummy=t,e.dummyFactoryInitialization=()=>()=>t()}(ha||(ha={})),function(e){e.dummy={flushMeasures:e=>[],measure:(e,t)=>t(),startMeasure:e=>({endMeasure(){},cancelMeasure(){}})}}(fa||(fa={})),function(e){let t;!function(e){let t;!function(e){let t;!function(e){e.stats="stats",e.csInit="csInit",e.viewInjection="viewInjection"}(t=e.Types||(e.Types={}))}(t=e.Tagged||(e.Tagged={}))}(t=e.Data||(e.Data={})),e.getStats=function(e){if(0===e.length)return{ct:0};{const t=e.reduce(((e,t)=>Math.min(e,t)),Number.MAX_VALUE),n=e.reduce(((e,t)=>Math.max(e,t)),Number.MIN_VALUE),r=e.length>=6?la(e):void 0;return{ct:e.length,min:t,max:n,range:n-t,avg:r,stddev:void 0!==r&&e.length>1?da(e,r):void 0}}}}(pa||(pa={}));const ba=new class{constructor(e){function t(e){return`Invalid pattern "${e}": "*" is allowed only at start and/or end position`}this._equal=new Set,this._prefix=[],this._suffix=[],this._infix=[],this._domain=[];for(const n of e)if(n.startsWith("**."))this._domain.push(n.substring(3));else{const e=n.indexOf("*");if(-1===e)this._equal.add(n);else if(e===n.length-1)this._prefix.push(n.substring(0,e));else{if(0!==e)throw new Error(t(n));{const e=n.indexOf("*",1);if(-1===e)this._suffix.push(n.substring(1));else{if(e!==n.length-1)throw new Error(t(n));this._infix.push(n.substring(1,e))}}}}}getTopSiteId(e){var t,n,r,i,o,s,a;return null!==(s=null!==(o=null!==(i=null!==(r=null!==(n=null!==(t=this._equal.has(e)?e:void 0)&&void 0!==t?t:this._domain.find((t=>t===e)))&&void 0!==n?n:(a=this._domain.find((t=>e.endsWith("."+t))))?"**."+a:void 0)&&void 0!==r?r:this._prefix.find((t=>e.startsWith(t))))&&void 0!==i?i:this._suffix.find((t=>e.endsWith(t))))&&void 0!==o?o:this._infix.find((t=>e.includes(t))))&&void 0!==s?s:null}includes(e){return null!==this.getTopSiteId(e)}}(["mail.google.com","translate.google.*","docs.google.com","web.whatsapp.com","facebook.com","outlook.*","linkedin.com","zendesk.*","youtube.com","twitter.com","messenger.com","*.slack.*","*canvas*","*instructure*","trello.com","editor.wix.com","quizlet.com","mail.yahoo.com","*.force.*","keep.google.com","vk.com","fanyi.baidu.com","app.bullhornstaffing.com","app.qa-world.com","calendar.google.com","papago.naver.com","wordcounter.net","blogger.*","wattpad.com","wordpress.com","amazon.*","smallseotools.com","create.kahoot.it","apps.rackspace.com","basecamp.com","varsitytutors.com","canva.com","fanyi.youdao.com","reverso.net","message.alibaba.com","*schoology*","*.blackboard.*","classroom.google.com","*upwork*","business.facebook.com","medium.com","mail.aol.com","workhub.transcribeme.com","github.com","**.salesforce.com","**.force.com","**.zendesk.com","**.microsoftonline.com","**.outlook.com","**.facebook.com","**.messenger.com","**.genesys.com","**.cisco.com","**.avaya.com","**.oraclecloud.com","**.five9.com","**.tawk.to","**.helpscout.com","**.livechat.com","**.intercom.com","**.freshdesk.com","**.liveagent.com","**.hubspot.com"]);function va(e){try{return JSON.stringify(e)}catch(e){return JSON.stringify({json_error:"Cannot json stringify"})}}function ya(e,t){return{json:va(e),exception:t?{name:t.name,message:t.message,stack:xa(t.stack)}:void 0}}function _a(){return nn().browserApi.baseUri}const wa={chromium:["<anonymous>","native","unknown location"],firefox:[],safari:["[native code]"]};function xa(e,{browser:t=nn().config.bundleInfo.browser,extensionBaseUri:n=_a()}={}){if(!e)return e;const r=wa["chrome"===t||"edge"===t?"chromium":t],i=e=>r.some((t=>e.startsWith(t)))||n&&e.startsWith(n),o=e.split("\n");if("chrome"===t||"edge"===t){const e=[];let t=0;for(;t<o.length&&!o[t].startsWith("    at ");)e.push(o[t]),t++;for(;t<o.length;){const n=(s=o[t],a=void 0,c=void 0,u=void 0,null===(u=null!==(c=null!==(a=Ea.exec(s))&&void 0!==a?a:Sa.exec(s))&&void 0!==c?c:Ia.exec(s))||void 0===u?void 0:u[1]);n?i(n)?e.push(o[t]):e.push("    at <hidden>"):e.push("    <unparsed>"),t++}return e.join("\n")}if("firefox"===t||"safari"===t)return o.map((e=>[e,"firefox"===t?Aa(e):Ta(e)])).map((([e,t])=>void 0===t?"<unparsed>":i(t)?e:"<hidden>")).join("\n");var s,a,c,u;_(t)}const Ea=/^ {4}at ([^(]*)$/,Sa=/^ {4}at [^(]* \(([^()]*)\)$/,Ia=/^ {4}at eval \([^(]* \(([^()]*)\)\)$/;function Aa(e){return e.split("@",2)[1]}function Ta(e){var t;return null!==(t=e.split("@",2)[1])&&void 0!==t?t:e}const Oa=Gt.create("lib.tracking.telemetry"),Ca=.1,ka=.01;class Ra{constructor(e=E,t=E,n=E,r=E,i=!1,o=ha.dummyFactoryInitialization,s=E,a=E,c=(e=>.01),u=E,l=o(((e,{hideUserInfo:t,...n})=>{this._sendEvent({logger:e,level:aa.INFO,hideUserInfo:t,...sa(n)})})),d=E){this._sendFelog=e,this._sendFelogUsage=t,this._setUserId=n,this._setContainerId=r,this._sendUsageMetrics=i,this._sendFelogEvent=s,this._sendFelogCrashLogs=a,this._getUsageMetricsRate=c,this._enableDataSharing=u,this._createPerfLogger=l,this._sendFelogMetricEvent=d,this._prepareDataString=(e,t)=>{let n;try{n=JSON.stringify(t)}catch(t){n=`stringify fail: '${t}', '${t&&t.message}'`,Oa.warn(n,e)}return n},this._sendEvent=e=>{try{this._sendFelogEvent(e)}catch(t){Oa.warn(`Failed to send felog for ${JSON.stringify(e)}`,t)}},this._sendException=e=>(t,n)=>{var r;return this._sendEvent({message:null!==(r=null==t?void 0:t.message)&&void 0!==r?r:String(t),...e,extra:{...e.extra,...ya(n,t)}})},this._sendUsageMetricsSamplingRatio=this._getUsageMetricsRate(ee().bundleInfo.browser),this.restoredBgConnection=e=>{this._send("cs.connection.bg.restored",aa.INFO,{timeWithoutConnection:e})},this.initWithoutBgConnection=()=>{this._send("cs.connection.bg.disconnected",aa.INFO)},this.fetchDefinitionsFail=()=>{this._send("cs.connection.api.definition.failed",aa.WARN)},this.tooLongPageConfigInit=e=>{this._send("cs.pageConfig.init.exceeded",aa.WARN,{initTime:e})},this.tooLongUserUpdateTime=e=>{this._send("bg.state.user.update.exceeded",aa.WARN,{updateTime:e})},this.lostBgPageConnection=()=>{this._send("cs.gbutton.bgСonnection.lost",aa.INFO)},this.restoreBgPageConnection=e=>{this._send("cs.gbutton.bgСonnection.restored",aa.INFO,{time:e})},this.dynamicConfigLoadFromPrefsError=e=>{this._sendSampled(ka,"bg.dynamicConfig.prefs.load.error",aa.ERROR,{message:e})},this.dynamicConfigSaveToPrefsError=e=>{this._sendSampled(ka,"bg.dynamicConfig.prefs.save.error",aa.ERROR,{message:e})},this.dynamicConfigLoadFromServerError=e=>{this._sendSampled(ka,"bg.dynamicConfig.server.load.error",aa.ERROR,{message:e})},this.pageConfigCDNError=e=>{this._send("cs.pageConfig.cdn.error",aa.ERROR,{message:e})},this.pageConfigLocalStorageError=(e,t)=>{this._send("cs.pageConfig.localStorage.error",aa.INFO,{message:e,name:t})},this.pageConfigUpdated=(e,t)=>{this._send("cs.pageConfig.updated",aa.INFO,{oldVersion:e,newVersion:t})},this.settingsPopupTimeout=()=>{this._send("settings.popup.init.timeout",aa.WARN)},this.settingsUsupportedShow=e=>{this._send("settings.popup.state.unsupported.show",aa.INFO,{popupType:e})},this.gnarClientInitFail=e=>{this._send("gnar.bg.tracking.gnar.init.fail",aa.WARN,{message:e})},this.bgTrackingInitFail=()=>{this._send("debug.tracking.init.fail",aa.INFO)},this.userUpgradeClick=e=>{this._send("cs.ui.action.upgradeClick",aa.INFO,{placement:e})},this.gGbUpHookClick=()=>{this._send("cs.ui.gb.uphook.click",aa.INFO)},this.gButtonClick=()=>{this._send("cs.ui.gbutton.click",aa.INFO)},this.checkingToggledInField=e=>{this._send("cs.ui.gbutton.toggleInField",aa.INFO,{enabled:e})},this.unexpectedAnonymous=e=>{this._send("debug.bg.session.unexpectedAnonymous",aa.INFO,e)},this.getDapiPropError=e=>{this._send("bg.connection.dapi.getProp.error",aa.WARN,{statusCode:e})},this.setDapiPropError=e=>{this._send("bg.connection.dapi.setProp.error",aa.WARN,{statusCode:e})},this.toggleExtensionDefs=e=>{this._send("bg.settings.definitions.toggle",aa.INFO,{enabled:e})},this.toggleExtension=(e,t)=>{this._send("bg.settings.extension.toggle",aa.INFO,{enabled:e,placement:t})},this.disableUntilNextVisit=()=>{this._send("cs.gbutton.disableUntilNextVisit",aa.INFO)},this.disableButtonClick=()=>{this._send("cs.gbutton.disableButtonClick",aa.INFO)},this.cookieOverflow=(e,t)=>{this._send("debug.bg.state.cookie.overflow",aa.INFO,{size:e,biggestCookie:t})},this.externalChangePlan=()=>{this._send("bg.api.external.changePlan",aa.INFO)},this.externalChangeDialect=()=>{this._send("bg.api.external.changeDialect",aa.INFO)},this.externalChangeUser=()=>{this._send("bg.api.external.changeUsed",aa.INFO)},this.externalLogout=()=>{this._send("bg.api.external.logout",aa.INFO)},this.bgPageStartFail=this._sendException({logger:"bg.start.fail",level:aa.ERROR}),this.acceptDataControl=()=>{this._send("bg.dataControl.accepted",aa.INFO)},this.bgPageInitTimeout=e=>{this._send("bg.state.start.timeout",aa.WARN,{initTime:e})},this.bgPageInitFail=e=>{this._send("bg.state.init.fail",aa.ERROR,{initAttempts:e})},this.extensionUpdated=(e,t)=>{this._send("bg.state.updated",aa.INFO,{currentVersion:e,previousVersion:t})},this.extensionUpdateFail=e=>{this._send("bg.state.update.fail",aa.INFO,{previousVersion:e})},this.cannotGetInstallSource=()=>{this._send("bg.getSource.fail",aa.WARN)},this.extensionInstall=e=>{this._send("bg.state.install",aa.INFO,{source:e})},this.chromeContentScriptLoadError=(e,t)=>{this._send("bg.chrome.cs.load.error",aa.WARN,{message:e,type:t})},this.reloadNotificationShow=()=>{this._send("bg.ui.notification.tabsReload.show",aa.WARN)},this.reloadNotificationClick=()=>{this._send("bg.ui.notification.tabsReload.click",aa.INFO)},this.fetchUserFail=(e,t,n)=>{this._send("bg.user.fetch.fail",aa.WARN,{body:t,statusCode:n,reason:e})},this.fetchMimicFail=(e,t)=>{this._send("bg.user.mimic.fail",aa.WARN,{body:e,statusCode:t})},this.fetchStatsFail=(e,t)=>{this._send("bg.user.dapi.prop.stats.fail",aa.WARN,{body:e,statusCode:t})},this.frequentCookieChanges=e=>{this._send("debug.cookie.onChange.error",aa.INFO,{canceled:e})},this.initializePropFromDapi=e=>{this._send("bg.state.dapi.prop.initialize",aa.INFO,{name:e})},this.onboardingPopupShow=()=>{this._send("cs.onboarding.popup.show",aa.INFO)},this.onboardingPopupCancel=()=>{this._send("cs.onboarding.popup.cancel",aa.INFO)},this.onboardingTutorialShow=()=>{this._send("cs.onboarding.tutorial.show",aa.INFO)},this.loginReminderPopupShow=()=>{this._send("cs.gbutton.popup.loginReminder.show",aa.INFO)},this.loginReminderBadgeShow=()=>{this._send("bg.state.user.loginReminder.enable",aa.INFO)},this.unhandledBgPageException=e=>{this._sendSampledEvent(.05,{logger:"bg.unhandledException",level:aa.ERROR,message:e.message,extra:ya({message:e.error?e.error.message:e.message,filename:e.filename,lineno:e.lineno,colno:e.colno},e.error)})},this.unhandledBgPageRejection=e=>{const t=null!=e.reason?"string"==typeof e.reason?e.reason:e.reason.message:void 0;this._sendSampledEvent(.05,{logger:"bg.unhandledRejection",level:aa.ERROR,message:t,extra:ya({message:t},e.reason)})},this.storageMigrationSucceeded=()=>{this._send("bg.storageMigration.success",aa.INFO,{})},this.storageMigrationFailed=this._sendException({logger:"bg.storageMigration.failure",level:aa.ERROR}),this.storageApplyChangesFailed=this._sendException({logger:"bg.storage.applyChanges.failure",level:aa.ERROR}),this.cardShowAction=()=>{this._sendSampled(Ca,"cs.editor.card.show",aa.INFO)},this.cardHideAction=()=>{this._sendSampled(Ca,"cs.editor.card.hide",aa.INFO)},this.cardReplacementAction=()=>{this._sendSampled(Ca,"cs.editor.card.replacement",aa.INFO)},this.cardAddToDictAction=()=>{this._sendSampled(Ca,"cs.editor.card.addToDict",aa.INFO)},this.cardIgnoreAction=()=>{this._sendSampled(Ca,"cs.editor.card.ignore",aa.INFO)},this.synonymCardShowAction=e=>{this._sendSampled(Ca,"cs.editor.synonym.show",aa.INFO,{notFoundCard:e})},this.synonymCardHideAction=e=>{this._sendSampled(Ca,"cs.editor.synonym.hide",aa.INFO,{notFoundCard:e})},this.synonymReplacementAction=()=>{this._sendSampled(Ca,"cs.editor.synonym.replacement",aa.INFO)},this.dictCardShowAction=()=>{this._sendSampled(Ca,"cs.editor.dict.show",aa.INFO)},this.dictCardHideAction=()=>{this._sendSampled(Ca,"cs.editor.dict.hide",aa.INFO)},this.couldNotParseTransform=(e,t)=>{this._send("cs.cards.transforms.parse.error",aa.WARN,{transformHTML:e,fallbackParseSuccessful:t})},this.disabledTabLoad=e=>{this._sendUsage("usage.loadOnDisabledTab",aa.INFO,{accountType:e})},this.disabledTabByUserLoad=e=>{this._sendUsage("usage.loadOnDisabledByUserTab",aa.INFO,{accountType:e})},this.initSession=(e,t,n,r)=>{this._sendUsage("usage.session.init",aa.INFO,{isTopSite:ga(e),accountType:t,fieldType:n,fieldSupported:r}),this._sendMetric("usage.session.init",{domain:e,accountType:t,fieldType:n,fieldSupported:r})},this.cardFirstInteraction=(e,t)=>{this._sendUsage("usage.card.interaction",aa.INFO,{accountType:e,fieldType:t})},this.gnar={nextPingDateWriteError:e=>this._send("bg.gnarTracker.nextPingDateWriteError",aa.ERROR,{error:e}),sendError:this._sendException({logger:"bg.gnarTracker.sendError",level:aa.ERROR}),trackBeforeSetUser:e=>this._send("bg.gnarTracker.trackBeforeSetUser",aa.INFO,{millisSinceInit:e}),errorSetUser:this._sendException({logger:"bg.gnarTracker.errorSetUser",level:aa.ERROR})},this.fluidGdocs={sidebarFail:S(((e,t)=>this._sendException({logger:"cs.gdocs.fluid.getSidebarFail",level:aa.ERROR})(e,{type:t}))),noPage:S((()=>this._send("cs.gdocs.fluid.noPage",aa.ERROR))),getFullTextFailed:S((e=>this._send("cs.gdocs.fluid.getFullTextFailed",aa.INFO,{type:e}))),getFullTextSuccess:()=>{this._sendSampled(1e-4,"cs.gdocs.getFullTextSuccess",aa.INFO)},contentMonitoringFailed:S(this._sendException({logger:"cs.gdocs.fluid.contentMonitoringFailed",level:aa.WARN})),pageToTextMapFail:S((()=>this._send("cs.gdocs.fluid.pageToTextMapFail",aa.INFO))),nestedTablesAppearance:S((()=>this._send("cs.gdocs.fluid.nestedTablesAppearance",aa.INFO))),mapTableIssue:S((e=>this._send("cs.gdocs.fluid.mapTableIssue",aa.INFO,{type:e}))),treeStructureFailure:S((()=>this._send("cs.gdocs.fluid.treeStructureFailure",aa.INFO))),textFragmentMapFail:S((()=>this._send("cs.gdocs.fluid.textFragmentMapFail",aa.INFO))),createMapFail:S(this._sendException({logger:"cs.gdocs.fluid.createMapFail",level:aa.ERROR})),eventTargetFail:S(this._sendException({logger:"cs.gdocs.fluid.eventTargetFail",level:aa.ERROR})),updateMapFail:S(this._sendException({logger:"cs.gdocs.fluid.updateMapFail",level:aa.ERROR})),shiftMapFail:S(this._sendException({logger:"cs.gdocs.fluid.shiftMapFail",level:aa.ERROR})),init:()=>this._sendEvent({logger:"cs.gdocs.fluid.init",level:aa.INFO,hideUserInfo:!0}),initOnCanvasAttempt:()=>this._send("cs.gdocs.fluid.canvas",aa.INFO),getTextPerf:this._createPerfLogger("cs.gdocs.fluid.perf.getText",30),buildTextMapPerf:this._createPerfLogger("cs.gdocs.fluid.perf.textMap",30),updateTextMapPerf:this._createPerfLogger("cs.gdocs.fluid.perf.updateTextMap",30)},this._sendGdocsPageExecutionException=this._sendException({logger:"cs.gdocs.pageExecution.exception",level:aa.ERROR}),this.gdocs={pageExecutionException:(e,t)=>this._sendGdocsPageExecutionException(e,{isGDocsCanvas:t}),disabledBeforeForceEnable:S((e=>this._send("cs.gdocs.disabledBeforeForceEnable",aa.INFO,{disabledDate:e}))),enabledBeforeForceEnable:S((()=>this._send("cs.gdocs.enabledBeforeForceEnable",aa.INFO)))},this.canvasGdocs={injectedException:S(this._sendException({logger:"cs.gdocs.canvas.injected.exception",level:aa.ERROR})),injectedError:I(((e,t,n)=>this._sendEvent({logger:"cs.gdocs.canvas.injected.error",level:aa.ERROR,message:t,extra:{json:va({context:e,data:n})}})),(e=>e)),initializationException:S(((e,t)=>this._sendException({logger:"cs.gdocs.canvas.init.exception",level:aa.ERROR})(e,{type:t}))),dataSourceException:S(((e,t)=>this._sendException({logger:"cs.gdocs.canvas.dataSource.exception",level:aa.ERROR})(e,{type:t}))),error:I(((e,t,n,r)=>this._sendEvent({logger:"cs.gdocs.canvas.error",level:aa.ERROR,message:t,extra:ya({type:e,message:t,data:r},n)})),(e=>e)),warning:I(((e,t,n)=>this._sendEvent({logger:"cs.gdocs.canvas.warning",level:aa.WARN,message:t,extra:ya({type:e,message:t,data:n})})),(e=>e)),started:()=>this._sendEvent({logger:"cs.gdocs.canvas.started",level:aa.INFO,hideUserInfo:!0}),creating:()=>this._sendEvent({logger:"cs.gdocs.canvas.creating",level:aa.INFO,hideUserInfo:!0}),traceMapType:e=>this._sendSampled(1e-4,"cs.gdocs.canvas.mappingType",aa.INFO,{mappingType:e}),debugPageSearchFail:S((e=>this._sendEvent({logger:"cs.gdocs.canvas.pageSearch.debug",level:aa.INFO,extra:{json:va({data:e})}}))),buildTextMapPerf:this._createPerfLogger("cs.gdocs.canvas.perf.textMap",30),findPage:this._createPerfLogger("cs.gdocs.canvas.perf.findPage",100)},this.readerGmail={warning:I(((e,t,n)=>this._sendEvent({logger:"cs.reader.gmail.warning",level:aa.WARN,message:t,extra:{json:va({type:e,message:t,data:n})}})),(e=>e))},this.performance={processInput:this._createPerfLogger("cs.fluid.processInput",100),processAlerts:this._createPerfLogger("cs.fluid.processAlerts",10),processFilterChange:this._createPerfLogger("cs.fluid.processFilterChange",10),csInitialized:(e,t,n,r,i)=>{this._createPerfLogger("cs.initialized").custom({_tag:pa.Data.Tagged.Types.csInit,domain:self.location.host,hideUserInfo:!0,loadTime:e,initTime:t,pageLoadTime:n,injectTime:r,error:i?{message:i.message,stack:i.stack}:void 0})},viewInjection:e=>{this._createPerfLogger("view.injection").custom({_tag:pa.Data.Tagged.Types.viewInjection,...e})}},this.autocorrect={responseTime:this._createPerfLogger("cs.autocorrect.responseTime",10),predictTime:this._createPerfLogger("cs.autocorrect.predictTime",10)},this.assistant={initTime:this._createPerfLogger("cs.assistant.initTime",1),renderTime:this._createPerfLogger("cs.assistant.renderTime",1),openTime:this._createPerfLogger("cs.assistant.openTime",1)},this.attentionHeatmap={textChangeProcessingTime:this._createPerfLogger("cs.attentionHeatmap.textChangeProcessingTime",100),responseProcessingTime:this._createPerfLogger("cs.attentionHeatmap.responseProcessingTime",10),highlightUpdateTime:this._createPerfLogger("cs.attentionHeatmap.highlightUpdateTime",100),highlightGeometryUpdateTime:this._createPerfLogger("cs.attentionHeatmap.highlightGeometryUpdateTime",100),responseTime:this._createPerfLogger("cs.attentionHeatmap.responseTime",10),canvasRenderTime:this._createPerfLogger("cs.attentionHeatmap.canvasRenderTime",100)},this.proofit={availabilityQuotaError:e=>{this._sendEvent({logger:"cs.proofit.availability_quota_error",level:aa.ERROR,extra:{json:JSON.stringify(e)}})},submitResponseError:e=>{this._sendEvent({logger:"cs.proofit.submit_response_error",level:aa.ERROR,extra:{json:JSON.stringify(e)}})},progressError:e=>{this._sendEvent({logger:"cs.proofit.progress_error",level:aa.ERROR,extra:{json:JSON.stringify(e)}})},progressRejected:e=>{this._sendEvent({logger:"cs.proofit.progress_rejected",level:aa.WARN,extra:{json:JSON.stringify(e)}})}},this.oauthExchangeError=e=>{this._send("bg.oauth.exchange.error",aa.ERROR,{message:e})},this.chipmunkAPIError=e=>{this._send("bg.chipmunk.api.error",aa.ERROR,{message:e})}}_send(e,t,n){const r=this._prepareDataString(e,n);try{this._sendFelog(e,void 0,t,n?{json:r}:void 0)}catch(t){Oa.warn(`Failed to send felog for ${e}: '${t&&t.message}'`,t)}}_sendUsage(e,t,n){if(this._sendUsageMetrics&&this._sendUsageMetricsSamplingRatio>Math.random())try{this._sendFelogUsage(e,"",t,n)}catch(t){Oa.warn(`Failed to send usage felog for ${e}: '${t&&t.message}'`,t)}}_sendSampled(e,t,n,r){e>Math.random()&&this._send(t,n,r)}_sendSampledEvent(e,t){e>Math.random()&&this._sendEvent(t)}_sendMetric(e,t){this._sendFelogMetricEvent({metricName:e,data:t})}sendCrashLogs(e,t){try{this._sendFelogCrashLogs(t)}catch(t){Oa.warn(`Failed to send crash data data for ${e}: '${t&&t.message}'`,t)}}setUserId(e){this._setUserId(e)}setContainerId(e){this._setContainerId(e)}enableDataSharing(){this._enableDataSharing()}notificationShown(e){this._send("cs.notification.show",aa.INFO,{type:e})}notificationHide(e){this._send("cs.notification.hide",aa.INFO,{type:e})}}class Fa{constructor(e,t,n=E){this.name=e,this._source=t,this._saveAction=n,this.dummy=!1,this.data=[],this.customBuffer=[],this._flush=()=>{this.data.push(...this._source.flushMeasures(this.name)),this._saveAction(this.data)},this.custom=e=>{this.customBuffer.push(e)},this.startMeasure=()=>{const e=this._source.startMeasure(this.name),t=()=>this._flush();return{endMeasure(){try{const n=e.endMeasure();return t(),n}catch(e){return}},cancelMeasure:()=>e.cancelMeasure()}},this.measure=e=>{const t=this._source.measure(this.name,e);try{this._flush()}catch(e){}return t},this.measureAsync=e=>{const t=this._source.startMeasure(this.name);return e().then((e=>{try{t.endMeasure(),this._flush()}catch(e){}return e}))}}getStats(){return this.data.length>0?{...pa.getStats(this.data),median:(e=this.data,ua(e,.5)),p90:ua(this.data,.9),p99:ua(this.data,.99)}:{};var e}}class Na{constructor(e){this._perf=e,this._log=Gt.create("cs.telemetry.PerformanceMetricsImpl")}flushMeasures(e){try{const t=this._perf.getEntriesByName(e,"measure");return this._perf.clearMeasures(e),t.map((e=>e.duration))}catch(e){return this._log.warn("failed to retrieve perf measurements",e),[]}}startMeasure(e){const t=Math.random(),n=`__${e}_${t}-start`,r=`__${e}_${t}-end`;try{this._perf.mark(n)}catch(e){return this._log.warn("could not start measure – ignoring measurement",e),{endMeasure:()=>{},cancelMeasure:E}}let i=!1;return{endMeasure:()=>{if(!i){i=!0;try{return this._perf.mark(r),this._perf.measure(e,n,r),this._perf.getEntriesByName(e,"measure")[0]}catch(e){return void this._log.warn("could not complete measure",e)}}},cancelMeasure:()=>{this._perf.clearMarks(n),this._perf.clearMarks(r)}}}measure(e,t){const n=`__${e}-start`,r=`__${e}-end`;try{this._perf.mark(n)}catch(e){return this._log.warn("could not start measure – ignoring measurement",e),t()}try{return t()}finally{try{this._perf.mark(r),this._perf.measure(e,n,r)}catch(e){this._log.warn("could not complete measure",e)}}}}!function(e){e.create=function(t){return void 0!==t?new e(t):fa.dummy}}(Na||(Na={}));const Pa=Gt.create("tracking.telemetry.performance.felog");class Ma{constructor(e,t,n,r=0,i=6e4){this.name=e,this._sendMetrics=t,this._source=n,this._minBufferSize=r,this._throttleTimeMs=i,this.dummy=!1,this._buffer=[],this._flush=A(this._throttleTimeMs,(()=>{if(this._buffer.push(...this._source.flushMeasures(this.name)),this._buffer.length>=this._minBufferSize){const e=pa.getStats(this._buffer);this._buffer=[],Pa.info(`sending perf stats for ${this.name}`,e),this._sendMetrics(this.name,{_tag:pa.Data.Tagged.Types.stats,...e})}})),this.custom=e=>{this._sendMetrics(this.name,e)},this.startMeasure=()=>{const e=this._source.startMeasure(this.name),t=()=>this._flush();return{endMeasure(){try{const n=e.endMeasure();return t(),n}catch(e){return}},cancelMeasure:()=>e.cancelMeasure()}},this.measure=e=>{const t=this._source.measure(this.name,e);try{this._flush()}catch(e){}return t},this.measureAsync=e=>{const t=this._source.startMeasure(this.name);return e().then((e=>{try{t.endMeasure(),this._flush()}catch(e){}return e}))}}}class Da{constructor(e,t,n,r,o){this._baseUrl=e,this._appName=t,this._appVersion=n,this._env=r,this._fetch=o,this._context={userId:void 0,containerId:void 0},this._sessionId=i(),this._logEndpoint=`${this._baseUrl}/logv2`,this._crashEndpoint=function(e){return`${e}/crashv2`}(this._baseUrl)}setUserId(e){this._context=Object.assign({},this._context,{userId:e})}setContainerId(e){this._context=Object.assign({},this._context,{containerId:e})}getContext(){return this._context}_sendRaw(e,t){return this._fetch(e,{mode:"cors",headers:{"Content-Type":"application/json"},method:"post",cache:"no-cache",body:JSON.stringify(t)}).then((e=>{}),(e=>{}))}sendEvent({hideUserInfo:e,...t}){const n=ca(t,{application:this._appName,version:this._appVersion,env:this._env,context:e?void 0:this.getContext()}),r=As(this._logEndpoint,e?[xs("extended","false")]:[]);return this._sendRaw(r,n)}sendCrashLog(e){const t=e.map((e=>ca(e,{application:this._appName,version:this._appVersion,sessionId:this._sessionId,env:this._env,context:this.getContext()})));return this._sendRaw(this._crashEndpoint,t)}sendUsageEvent(e,t,n,r){const i=ca({logger:e,message:t,level:n,extra_usage:r},{application:this._appName,version:this._appVersion,env:this._env});return this._sendRaw(this._logEndpoint,i)}sendAggregatedMetricEvent({metricName:e,aggregateKey:t,aggregatedData:n,startTimestamp:r,endTimestamp:i}){const o=ca({logger:e,level:aa.INFO,timestamp:r,endTimestamp:i,aggregateKey:t,aggregatedData:n},{application:this._appName,version:this._appVersion,env:this._env});return this._sendRaw(this._logEndpoint,o)}}const ja={};function Ua(e,t){return{...La,keySelector:e,resultSelector:t}}const La={seedSelector:e=>0,aggregate:(e,t)=>e+1},Ba={"usage.session.init":{byTopSites:Ua((({domain:e})=>({topSiteId:ma(e)})),((e,t)=>({count:t}))),byTopSiteAndField:Ua((({domain:e,fieldType:t})=>({topSiteId:ma(e),fieldType:t})),((e,t)=>({count:t})))}};var $a=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return ye(t,e),t.prototype.schedule=function(t,n){return void 0===n&&(n=0),n>0?e.prototype.schedule.call(this,t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,n){return n>0||this.closed?e.prototype.execute.call(this,t,n):this._execute(t,n)},t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?e.prototype.requestAsyncId.call(this,t,n,r):t.flush(this)},t}(Tn),Va=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ye(t,e),t}(Cn))($a);function Wa(e){var t=e.index,n=e.period,r=e.subscriber;if(r.next(t),!r.closed){if(-1===n)return r.complete();e.index=t+1,this.schedule(e,n)}}function Ga(e,t,n,r){return function(i){return i.lift(new qa(e,t,n,r))}}var qa=function(){function e(e,t,n,r){this.keySelector=e,this.elementSelector=t,this.durationSelector=n,this.subjectSelector=r}return e.prototype.call=function(e,t){return t.subscribe(new Ha(e,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},e}(),Ha=function(e){function t(t,n,r,i,o){var s=e.call(this,t)||this;return s.keySelector=n,s.elementSelector=r,s.durationSelector=i,s.subjectSelector=o,s.groups=null,s.attemptedToUnsubscribe=!1,s.count=0,s}return ye(t,e),t.prototype._next=function(e){var t;try{t=this.keySelector(e)}catch(e){return void this.error(e)}this._group(e,t)},t.prototype._group=function(e,t){var n=this.groups;n||(n=this.groups=new Map);var r,i=n.get(t);if(this.elementSelector)try{r=this.elementSelector(e)}catch(e){this.error(e)}else r=e;if(!i){i=this.subjectSelector?this.subjectSelector():new Ve,n.set(t,i);var o=new Ka(t,i,this);if(this.destination.next(o),this.durationSelector){var s=void 0;try{s=this.durationSelector(new Ka(t,i))}catch(e){return void this.error(e)}this.add(s.subscribe(new za(t,i,this)))}}i.closed||i.next(r)},t.prototype._error=function(e){var t=this.groups;t&&(t.forEach((function(t,n){t.error(e)})),t.clear()),this.destination.error(e)},t.prototype._complete=function(){var e=this.groups;e&&(e.forEach((function(e,t){e.complete()})),e.clear()),this.destination.complete()},t.prototype.removeGroup=function(e){this.groups.delete(e)},t.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&e.prototype.unsubscribe.call(this))},t}(Re),za=function(e){function t(t,n,r){var i=e.call(this,n)||this;return i.key=t,i.group=n,i.parent=r,i}return ye(t,e),t.prototype._next=function(e){this.complete()},t.prototype._unsubscribe=function(){var e=this.parent,t=this.key;this.key=this.parent=null,e&&e.removeGroup(t)},t}(Re),Ka=function(e){function t(t,n,r){var i=e.call(this)||this;return i.key=t,i.groupSubject=n,i.refCountSubscription=r,i}return ye(t,e),t.prototype._subscribe=function(e){var t=new Oe,n=this.refCountSubscription,r=this.groupSubject;return n&&!n.closed&&t.add(new Ja(n)),t.add(r.subscribe(e)),t},t}(je),Ja=function(e){function t(t){var n=e.call(this)||this;return n.parent=t,t.count++,n}return ye(t,e),t.prototype.unsubscribe=function(){var t=this.parent;t.closed||this.closed||(e.prototype.unsubscribe.call(this),t.count-=1,0===t.count&&t.attemptedToUnsubscribe&&t.unsubscribe())},t}(Oe);function Ya(e,t){var n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Xa(e,t,n))}}var Xa=function(){function e(e,t,n){void 0===n&&(n=!1),this.accumulator=e,this.seed=t,this.hasSeed=n}return e.prototype.call=function(e,t){return t.subscribe(new Qa(e,this.accumulator,this.seed,this.hasSeed))},e}(),Qa=function(e){function t(t,n,r,i){var o=e.call(this,t)||this;return o.accumulator=n,o._seed=r,o.hasSeed=i,o.index=0,o}return ye(t,e),Object.defineProperty(t.prototype,"seed",{get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e},enumerable:!0,configurable:!0}),t.prototype._next=function(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)},t.prototype._tryNext=function(e){var t,n=this.index++;try{t=this.accumulator(this.seed,e,n)}catch(e){this.destination.error(e)}this.seed=t,this.destination.next(t)},t}(Re);function Za(e){return function(t){return 0===e?jn():t.lift(new ec(e))}}var ec=function(){function e(e){if(this.total=e,this.total<0)throw new Mn}return e.prototype.call=function(e,t){return t.subscribe(new tc(e,this.total))},e}(),tc=function(e){function t(t,n){var r=e.call(this,t)||this;return r.total=n,r.ring=new Array,r.count=0,r}return ye(t,e),t.prototype._next=function(e){var t=this.ring,n=this.total,r=this.count++;t.length<n?t.push(e):t[r%n]=e},t.prototype._complete=function(){var e=this.destination,t=this.count;if(t>0)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,i=0;i<n;i++){var o=t++%n;e.next(r[o])}e.complete()},t}(Re);function nc(e,{windowUnitDuration:t=Hr(1),scheduler:n=Va,logger:r}={}){return i=>i.pipe(Ga((e=>e.metricName)),rr((i=>{const o=i.key;if(!Boolean(e[o]))return null==r||r.warn(`Aggregators for metric ${o} are not defined`),Dn;return Zn(cs(e[o]).map((([e,t])=>[`${o}.${e}`,t]))).pipe(rr((([e,r])=>i.pipe(Ga((e=>{return t=r.keySelector(e.data),JSON.stringify(t,((e,t)=>"object"==typeof t&&t&&!Array.isArray(t)?function(e){const t={};for(const[n,r]of e)t[n]=r;return t}(cs(t).sort((([e],[t])=>e<t?-1:e>t?1:0))):t));var t}),void 0,(e=>{var n;return function(e,t,n){void 0===e&&(e=0);var r=-1;return Rn(t)?r=Number(t)<1?1:Number(t):Ct(t)&&(n=t),Ct(n)||(n=kn),new je((function(t){var i=Rn(e)?e:+e-n.now();return n.schedule(Wa,i,{index:0,period:r,subscriber:t})}))}((null!==(n=r.aggregateWindowUnits)&&void 0!==n?n:1)*t)})),rr((e=>e.pipe(function(e,t){return arguments.length>=2?function(n){return Me(Ya(e,t),Za(1),$n(t))(n)}:function(t){return Me(Ya((function(t,n,r){return e(t,n,r+1)})),Za(1))(t)}}(((e,t)=>function({keySelector:e,seedSelector:t,aggregate:n},{data:r},{now:i},{aggregateKey:o,startTimestamp:s,aggregatedData:a}={aggregateKey:e(r),startTimestamp:i(),aggregatedData:t(e(r))}){return{aggregateKey:o,startTimestamp:s,aggregatedData:n(a,r)}}(r,t,n,e)),void 0)))),rt((e=>Boolean(e))),xn((({aggregatedData:t,aggregateKey:i,startTimestamp:o})=>({metricName:e,aggregateKey:i,startTimestamp:o,endTimestamp:n.now(),aggregatedData:r.resultSelector(i,t)})))))))})))}const rc=Gt.create("lib.tracking.call");let ic,oc;function sc(){return void 0===oc&&(oc=!te()),oc}function ac(){oc=!0}var cc;!function(e){function t(){return ic||(ic=re()?new Da(se().newFelog,ee().appConfig.felog.appName,ee().buildInfo.version,oe(),me(self).fetch):void 0),ic}function n(e,t){e(t)}const r=new Ve,i=r.pipe(nc(Ba,{logger:rc}));let o,s;!function(e){e.sendFelog=function(e,r,i,o){if(!sc())return;const s=t();if(!s)throw Error("sendFelog unavailable");s.sendEvent({logger:e,message:r,level:i,extra:o}).catch((t=>n(me(s).sendEvent,{logger:e,message:r,level:i,extra:o})))},e.sendFelogEvent=function(e){if(!sc())return;const r=t();if(!r)throw Error("felog unavailable");r.sendEvent(e).catch((t=>n(me(r).sendEvent,e)))},e.sendFelogCrashLogs=function(e){if(!sc())return;const n=t();n&&n.sendCrashLog(e)},e.sendFelogUsageEvent=function(e,r,i,o){if(!sc())return;const s=t();if(!s)throw Error("felogClient unavailable");s.sendUsageEvent(e,r,i,o).catch((t=>n((e=>{s.sendUsageEvent(e.logger,e.message,e.level,e.usage)}),{logger:e,message:r,level:i,usage:o})))},e.sendFelogMetricEvent=function(e){sc()&&(o||(o=i.subscribe((e=>{const n=t();n?n.sendAggregatedMetricEvent(e).catch((t=>(rc.warn("Unable to send aggregated metric event (first attempt)",t),n.sendAggregatedMetricEvent(e)))).catch((e=>{rc.error("Unable to send aggregated metric event",e)})):rc.error("felogClient unavailable")}))),r.next(e))},e.setUserId=function(e){const n=t();n&&n.setUserId(e)},e.setContainerId=function(e){const n=t();n&&n.setContainerId(e)}}(s=e.methods||(e.methods={})),e.CALL_HANDLER_ID="tracking/RPC"}(cc||(cc={}));const uc=Object.keys(cc.methods).reduce(((e,t)=>(e[t]=(...e)=>function(e,...t){const n=t=>{rc.warn(`tracking call ${e} failed, reason: `,t)};if(re())!function(e,t=10){setTimeout(e,t)}((()=>{try{switch(rc.info(e,t),e){case cc.CALL_HANDLER_ID:const n=t[0],r=t.slice(1);cc.methods[n](...r);break;default:!function(e,t){const[n,r]=e.split(".");if("gnar"===n)if(ja.gnar)if("track"===r){const[e,n]=t;ja.gnar.track({eventName:ae()+"/"+e,...n})}else if("pingMaybe"===r)ja.gnar.pingMaybe();else if("setUser"===r)try{ja.gnar.setUser(t[0],t[1])}catch(e){dc().gnar.errorSetUser(e)}else rc.error(`gnar client does not have method '${r}' for '${e}' in runMessage`);else rc.error(`gnar client not available for '${e}' in runMessage`);else rc.error(`unrecognized '${e}' in runMessage`)}(e,t)}}catch(e){n(e)}}),20);else{const r=1e4;let i;const o=()=>clearInterval(i),s=e=>{o(),n(e)};i=self.setTimeout((()=>s("timeout call through bg page")),r),_n("tracking-call",{msg:e,data:t},o)}}(cc.CALL_HANDLER_ID,t,...e),e)),{});Gt.create("lib.tracking.logger");let lc;function dc(){if(!lc){const e=me(uc);lc=new Ra(e.sendFelog,e.sendFelogUsageEvent,e.setUserId,e.setContainerId,ee().appConfig.felog.sendUsageMetrics,function(){const e=ee().appConfig.felog.sendPerfMetricsType;return"local"===e?(t=Na.create(self.performance),e=>e=>{const n=self.__GR_PERFORMANCE_STORE__||{};if(self.__GR_PERFORMANCE_STORE__=n,e in n)return n[e];{const r=new Fa(e,t);return n[e]=r,r}}):((e,t,n=6e4)=>r=>(i,o)=>e?new Ma(i,r,t,o,n):ha.dummy())("send"===e,Na.create(self.performance));var t}(),e.sendFelogEvent,e.sendFelogCrashLogs,void 0,ac,void 0,e.sendFelogMetricEvent)}return lc}class hc{constructor(e){this.port=chrome.runtime.connect({name:e})}onMessage(e){this.port.onMessage.addListener(e)}onDisconnect(e){this.port.onDisconnect.addListener(e)}postMessage(e){this.port.postMessage(e)}}class fc{constructor(e){this._port=e,this.sender={};const{sender:t,name:n}=e;this.name=n,t&&(this.sender.url=t.url,this.sender.frameId=t.frameId,t.tab&&t.tab.url&&t.tab.id&&(this.sender.tab={url:t.tab.url,id:t.tab.id}))}onMessage(e){this._port.onMessage.addListener(e)}onDisconnect(e){this._port.onDisconnect.addListener(e)}postMessage(e){this._port.postMessage(e)}}class pc{constructor(e){this._isBg=e,this._manifestVersion="2",this._action="3"===this._manifestVersion?chrome.action:chrome.browserAction,this.alarms=new Ps,this.managedStorage=new js,this.tabs=new Qs(this._manifestVersion),this.thirdPartyExtensionsInstalled={},this.notification={kind:"web-extension",create:e=>g.create(((t,n)=>{const r=chrome.notifications,o=i();r.create(o,Object.assign({type:"basic"},e),(()=>{Ms((()=>{const e=new je((e=>{const t=t=>t===o&&e.next(t);return r.onClicked.addListener(t),()=>r.onClicked.removeListener(t)})),n=new je((e=>{const t=(t,n)=>t===o&&e.next({id:t,buttonIndex:n});return r.onButtonClicked.addListener(t),()=>r.onButtonClicked.removeListener(t)})),i=new je((e=>{const t=(t,n)=>t===o&&e.next({id:t,byUser:n});return r.onClosed.addListener(t),()=>r.onClosed.removeListener(t)}));t({id:o,click:e,buttonClick:n,close:i})}),n)}))})),clear:e=>g.create(((t,n)=>{chrome.notifications.clear(e,(e=>{Ms((()=>t(e)),n)}))}))},this.cookies={kind:"web-extension",get:e=>g.create(((t,n)=>chrome.cookies.get(e,(e=>Ms((()=>t(e)),n))))),remove:e=>new Promise(((t,n)=>chrome.cookies.remove(e,(()=>Ms((()=>t(null)),n))))),getAll:e=>g.create(((t,n)=>chrome.cookies.getAll(e,(e=>Ms((()=>t(e)),n))))),set:e=>g.create(((t,n)=>chrome.cookies.set(e,(e=>Ms((()=>t(e)),n))))),watch(e,t){const n=n=>{const{cookie:r,cause:i}=n;!r||!r.name||e.path&&e.path!==r.path||e.name!==r.name||e.domain&&-1===r.domain.indexOf(e.domain)||("explicit"===i&&t(r),"expired_overwrite"===i&&t())};return chrome.cookies.onChanged.addListener(n),()=>chrome.cookies.onChanged.removeListener(n)},getChanges(e){return new je((t=>this.watch(e,(e=>t.next(e)))))}},this._prefsBeforeMigration=function(){var e;const t=new Ve;return null===(e=chrome.storage)||void 0===e||e.onChanged.addListener(((e,n)=>{"local"===n&&t.next(e)})),{...Xs(),changes:t}}(),this.preferences=this._isBg?new ta.MigrationAwarePreferencesApiImpl("chromeGdocsForceEnableMigration",this._prefsBeforeMigration,this._prefsBeforeMigration,void 0,Ns((e=>dc().gdocs.disabledBeforeForceEnable(e)),(()=>dc().gdocs.enabledBeforeForceEnable()))):this._prefsBeforeMigration,this.management={uninstallSelf(){chrome.management.uninstallSelf()}},this._baseUrl=x((()=>chrome.runtime.getURL("")),(e=>null)),this.permissions=chrome.permissions?{watchAdded:e=>{chrome.permissions.onAdded.addListener(e)},added:new je((e=>{const t=t=>{e.next(t)};return chrome.permissions.onAdded.addListener(t),()=>{chrome.permissions.onAdded.removeListener(t)}})),watchRemoved:e=>{chrome.permissions.onRemoved.addListener(e)},removed:new je((e=>{const t=t=>{e.next(t)};return chrome.permissions.onRemoved.addListener(t),()=>{chrome.permissions.onRemoved.removeListener(t)}})),getAll:()=>new Promise((e=>chrome.permissions.getAll(e))),request:e=>new Promise(((t,n)=>chrome.permissions.request(e,(e=>{chrome.runtime.lastError?n(chrome.runtime.lastError):t(e)})))),contains:e=>new Promise(((t,n)=>{chrome.permissions.contains(e,(e=>{chrome.runtime.lastError?n(chrome.runtime.lastError):t(e)}))}))}:void 0,this.fetchBlocklistConfig=async()=>({}),this.getUrl=e=>this._baseUrl?this._baseUrl+e:chrome.runtime.getURL(e),this.fetchInternalResource=(e,t)=>fetch(this.getUrl(e)).then((e=>"json"===t?e.json():e.arrayBuffer())),this.openUrl=e=>this.tabs.open(e,!0),this.openPopupSubscriptionDialog=e=>{return this.openUrl((t=e.utmSource,n=e.utmCampaign,As(se().planComparison,Os({medium:"internal",source:t,campaign:n}))));var t,n},this.openSubscriptionDialog=e=>function(e){const t=ee().appConfig.url;self.open(As(t.planComparison,[...e.isFromEmail?[xs("isFromEmail","1")]:[],xs("alerts",Rs(Cs(e.currentAlerts))),xs("lensedAlerts",Rs(ks(e.currentAlerts))),xs("app_type","popup"),xs("browser",ie()),...Os({medium:"internal",source:e.isAnonymousUser?"signupHook":"upHook",campaign:e.forceUtmCampaign?e.forceUtmCampaign:e.isAnonymousUser?"extensionPremiumCta":"extensionGButton"})]))}(e),this.isExtensionUrl=(e,t)=>this.getUrl(e)===t,this.reload=()=>chrome.runtime.reload(),this.i18n={detectLanguage:e=>g.create(((t,n)=>chrome.i18n.detectLanguage(e,(e=>Ms((()=>t(e)),n))))),getUILanguage:()=>chrome.i18n.getUILanguage(),getAcceptLanguages:()=>g.create(((e,t)=>chrome.i18n.getAcceptLanguages((n=>Ms((()=>e(n)),t)))))},this.initCodeSplittingListener=()=>{return chrome.runtime.onMessage.addListener((e=this.tabs.executeScript,(t,n,r)=>{t&&"CODE_SPLITTING_INJECT"===t.type&&t.file&&n&&n.tab&&null!=n.tab.id&&(e(t.file,Number(n.tab.id),n.frameId),r())}));var e},this.isExtensionInstalled=async(e,t=!1)=>{if(!t&&void 0!==this.thirdPartyExtensionsInstalled[e])return this.thirdPartyExtensionsInstalled[e];if("undefined"==typeof fetch)return!1;const n=pc.thirdPartyExtensionsData[e].publicResources.reduce(((t,n)=>(ne()&&t.push(`chrome-extension://${pc.thirdPartyExtensionsData[e].MSStoreId}${n}`),t.concat(`chrome-extension://${pc.thirdPartyExtensionsData[e].id}${n}`))),[]);return(r=n.map((e=>fetch(e))),m(Promise.all([...r].map(m)))).then((e=>!0)).catch((e=>!1));var r},this.message=e?new Ks((e=>chrome.runtime.onConnect.addListener((t=>e(new fc(t))))),me(this.tabs).getActiveTab,me(this.tabs).getAllTabs):new Ys((e=>new hc(e)))}get button(){const e=this._action;return{kind:"web-extension",setBadge(t){e.setBadgeText({text:t})},setIconByName(t){const n="./src/icon/icon",r=t?"-"+t:"";e.setIcon({path:{16:`${n}16${r}.png`,32:`${n}32${r}.png`}})},setBadgeBackgroundColor(t){e.setBadgeBackgroundColor({color:t})}}}get baseUri(){var e;return null!==(e=this._baseUrl)&&void 0!==e?e:chrome.runtime.getURL("")}}pc.thirdPartyExtensionsData={mseditor:{id:"gpaiobkfhnonedkhhfjpmhdalgeoebfa",MSStoreId:"hokifickgkhplphjiodbggjmoafhignh",publicResources:["/fonts/fabric-icons.css"]},office:{id:"ndjpnladcallmjemlbaebfadecfhkepb",MSStoreId:"gggmmkjegpiggikcnhidnjjhmicpibll",publicResources:["/fonts/fabric-icons.css"]}},ms.start({browser:"chrome",extensionType:"chromiumWebExtension",browserApi:function(e){return new pc(e)}(!1)})})();